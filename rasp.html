
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Documentation for the DexGuard tool">
      
      
        <meta name="author" content="Guardsquare">
      
      
      
        <link rel="prev" href="usage.html">
      
      
        <link rel="next" href="features/hardware.html">
      
      
      <link rel="icon" href="img/favicon.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.5.7">
    
    
      
        <title>Overview - DexGuard</title>
      
    
    
      <link rel="stylesheet" href="assets/stylesheets/main.f2e4d321.min.css">
      
        
        <link rel="stylesheet" href="assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family='',+'Helvetica+Neue',+Helvetica,+Arial,+sans-serif:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"'', 'Helvetica Neue', Helvetica, Arial, sans-serif";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="css/guardsquare.css">
    
      <link rel="stylesheet" href="css/extra2.css">
    
      <link rel="stylesheet" href="css/text-alignment.css">
    
      <link rel="stylesheet" href="css/admonition-styles.css">
    
    <script>__md_scope=new URL(".",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-NMXSB9');</script>
<!-- End Google Tag Manager -->


  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="guardsquare" data-md-color-accent="guardsquare">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#runtime-application-self-protection" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NMXSB9"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->
   
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="index.html" title="DexGuard" class="md-header__button md-logo" aria-label="DexGuard" data-md-component="logo">
      
  <img src="img/logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            DexGuard
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Overview
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    

    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="index.html" title="DexGuard" class="md-nav__button md-logo" aria-label="DexGuard" data-md-component="logo">
      
  <img src="img/logo.png" alt="logo">

    </a>
    DexGuard
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="index.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="introduction.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Introduction
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Quick Start
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Quick Start
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="overview.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="platform.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Guided Configuration
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="quickstart.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Manual Configuration
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="video-tutorials/menu.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Video Tutorial
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Setup
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Setup
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="setup/downloading-dexguard.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Downloading DexGuard
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="setup/gradle-plugin.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Gradle Plugin
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="setup/standalone.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Standalone
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="setup/upgrading.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Upgrading
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="setup/repository.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Maven Repository
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="setup/espresso.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Espresso
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="setup/cordovaplugin.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Cordova Plugin
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Configuration
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Configuration
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="configuration.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="defaultconfigurations.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Default Configs
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="annotations.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Annotations
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="usage.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Reference Guide
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" checked>
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Features
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            Features
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_1" checked>
        
          
          <label class="md-nav__link" for="__nav_7_1" id="__nav_7_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    RASP
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_7_1_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_7_1">
            <span class="md-nav__icon md-icon"></span>
            RASP
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Overview
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="rasp.html" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#what-is-rasp" class="md-nav__link">
    <span class="md-ellipsis">
      What is RASP?
    </span>
  </a>
  
    <nav class="md-nav" aria-label="What is RASP?">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#available-rasp-checks" class="md-nav__link">
    <span class="md-ellipsis">
      Which RASP checks are available?
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#how-is-rasp-injected" class="md-nav__link">
    <span class="md-ellipsis">
      How is RASP injected?
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#enabling-rasp-checks" class="md-nav__link">
    <span class="md-ellipsis">
      Enabling RASP checks
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#addressing-rasp-check-limitations" class="md-nav__link">
    <span class="md-ellipsis">
      Addressing RASP check limitations
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#reacting-to-rasp-checks" class="md-nav__link">
    <span class="md-ellipsis">
      Reacting to RASP checks
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Reacting to RASP checks">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#crashing-on-detection" class="md-nav__link">
    <span class="md-ellipsis">
      Crashing on detection
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#monitoring-threats" class="md-nav__link">
    <span class="md-ellipsis">
      Monitoring threats
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#custom-reaction-strategies" class="md-nav__link">
    <span class="md-ellipsis">
      Custom reaction strategies
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#verification" class="md-nav__link">
    <span class="md-ellipsis">
      Verification
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Verification">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#size" class="md-nav__link">
    <span class="md-ellipsis">
      Size
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#performance" class="md-nav__link">
    <span class="md-ellipsis">
      Performance
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="features/hardware.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    OS Integrity
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="threatcast.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ThreatCast
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="features/attestation.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    App Attestation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="features/malware.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Malware Protection
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="protection.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Code & Data Protection
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8" >
        
          
          <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Languages & Platforms
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            Languages & Platforms
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="languages_platforms/java.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Java
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="languages_platforms/kotlin.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Kotlin
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="languages_platforms/hermes.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Hermes
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8_4" >
        
          
          <label class="md-nav__link" for="__nav_8_4" id="__nav_8_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    JavaScript
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_8_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8_4">
            <span class="md-nav__icon md-icon"></span>
            JavaScript
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="languages_platforms/javascript/index.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8_4_2" >
        
          
          <label class="md-nav__link" for="__nav_8_4_2" id="__nav_8_4_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Quick Start
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_8_4_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8_4_2">
            <span class="md-nav__icon md-icon"></span>
            Quick Start
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="languages_platforms/javascript/quickstart/dexguardintegration.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    DexGuard Integration
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="languages_platforms/javascript/quickstart/bestpractices.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Best Practices
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8_4_3" >
        
          
          <label class="md-nav__link" for="__nav_8_4_3" id="__nav_8_4_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Configuration
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_8_4_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8_4_3">
            <span class="md-nav__icon md-icon"></span>
            Configuration
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="languages_platforms/javascript/configuration/configuration.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Basic Configuration Options
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="languages_platforms/javascript/configuration/filters.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Filters
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="languages_platforms/javascript/configuration/assumptions.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Assumptions
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8_4_4" >
        
          
          <label class="md-nav__link" for="__nav_8_4_4" id="__nav_8_4_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Features
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_8_4_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8_4_4">
            <span class="md-nav__icon md-icon"></span>
            Features
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="languages_platforms/javascript/features/shrinking.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Shrinking
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8_4_4_2" >
        
          
          <label class="md-nav__link" for="__nav_8_4_4_2" id="__nav_8_4_4_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Protection
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_8_4_4_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8_4_4_2">
            <span class="md-nav__icon md-icon"></span>
            Protection
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8_4_4_2_1" >
        
          
          <label class="md-nav__link" for="__nav_8_4_4_2_1" id="__nav_8_4_4_2_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Data
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="5" aria-labelledby="__nav_8_4_4_2_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8_4_4_2_1">
            <span class="md-nav__icon md-icon"></span>
            Data
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8_4_4_2_1_1" >
        
          
          <label class="md-nav__link" for="__nav_8_4_4_2_1_1" id="__nav_8_4_4_2_1_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Strings
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="6" aria-labelledby="__nav_8_4_4_2_1_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8_4_4_2_1_1">
            <span class="md-nav__icon md-icon"></span>
            Strings
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="languages_platforms/javascript/features/stringencryption.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Encryption
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="languages_platforms/javascript/features/stringarray.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Array Transformation
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8_4_4_2_2" >
        
          
          <label class="md-nav__link" for="__nav_8_4_4_2_2" id="__nav_8_4_4_2_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Code
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="5" aria-labelledby="__nav_8_4_4_2_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8_4_4_2_2">
            <span class="md-nav__icon md-icon"></span>
            Code
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="languages_platforms/javascript/features/nameobfuscation.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Name Obfuscation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="languages_platforms/javascript/features/functionencryption.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Function Encryption
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="languages_platforms/javascript/features/numberobfuscation.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Number Obfuscation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="languages_platforms/javascript/features/arithmeticobfuscation.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Arithmetic Obfuscation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="languages_platforms/javascript/features/controlflowobfuscation.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Control Flow Obfuscation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="languages_platforms/javascript/features/propertydeclarationobfuscation.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Property Declaration Obfuscation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="languages_platforms/javascript/features/propertyaccessobfuscation.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Property Access Obfuscation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="languages_platforms/javascript/features/shuffling.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Shuffling
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8_4_4_2_3" >
        
          
          <label class="md-nav__link" for="__nav_8_4_4_2_3" id="__nav_8_4_4_2_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Environment
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="5" aria-labelledby="__nav_8_4_4_2_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8_4_4_2_3">
            <span class="md-nav__icon md-icon"></span>
            Environment
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="languages_platforms/javascript/features/debuggerobstruction.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Debugger Obstruction
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8_4_5" >
        
          
          <label class="md-nav__link" for="__nav_8_4_5" id="__nav_8_4_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Troubleshooting
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_8_4_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8_4_5">
            <span class="md-nav__icon md-icon"></span>
            Troubleshooting
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="languages_platforms/javascript/trouble-shooting/knownlimitations.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Known Issues and Limitations
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8_4_6" >
        
          
          <label class="md-nav__link" for="__nav_8_4_6" id="__nav_8_4_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    About
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_8_4_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8_4_6">
            <span class="md-nav__icon md-icon"></span>
            About
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="languages_platforms/javascript/about/release-notes.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Release Notes
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8_5" >
        
          
          <label class="md-nav__link" for="__nav_8_5" id="__nav_8_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Flutter
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_8_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8_5">
            <span class="md-nav__icon md-icon"></span>
            Flutter
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="languages_platforms/flutter/index.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="languages_platforms/flutter/start-android.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Quick Start
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="languages_platforms/flutter/building-on-windows.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Using Windows
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="languages_platforms/flutter/configuration.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Configuration
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="languages_platforms/flutter/filters.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Filters
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="languages_platforms/flutter/callbacks.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Callbacks
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="languages_platforms/flutter/troubleshooting.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Troubleshooting
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9" >
        
          
          <label class="md-nav__link" for="__nav_9" id="__nav_9_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    In Depth
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9">
            <span class="md-nav__icon md-icon"></span>
            In Depth
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="indepth/protectionreport/protectionreport.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Protection Report
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="indepth/pgo.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Profile-Guided Obfuscation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="indepth/examples.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Examples
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="indepth/refcard.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Reference Card
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="indepth/optimizations.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Optimizations
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="indepth/attributes.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Attributes
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="indepth/loggingremoval.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Logging Removal
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="indepth/verification.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Verification
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="indepth/runtime.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Runtime Library
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="indepth/codepush.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Code Push
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="indepth/apkexpansionfiles.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    APK Expansion Files
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_10" >
        
          
          <label class="md-nav__link" for="__nav_10" id="__nav_10_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Addons
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_10">
            <span class="md-nav__icon md-icon"></span>
            Addons
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="addons/ndk.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    NDK
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_11" >
        
          
          <label class="md-nav__link" for="__nav_11" id="__nav_11_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Tools
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_11_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_11">
            <span class="md-nav__icon md-icon"></span>
            Tools
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="tools/androidstudio.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Android Studio Plugin
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="tools/libraryrulesgenerator.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Library Rules Generator
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="tools/retrace.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ReTrace
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_12" >
        
          
          <label class="md-nav__link" for="__nav_12" id="__nav_12_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Troubleshooting
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_12_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_12">
            <span class="md-nav__icon md-icon"></span>
            Troubleshooting
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="troubleshooting.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="troubleshooting/knownissues.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Known Issues
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="troubleshooting/reportingissues.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Reporting Issues
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_13" >
        
          
          <label class="md-nav__link" for="__nav_13" id="__nav_13_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    About
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_13_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_13">
            <span class="md-nav__icon md-icon"></span>
            About
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="about/releasenotes.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Release Notes
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="about/systemrequirements.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    System Requirements
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="about/license.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    License
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#what-is-rasp" class="md-nav__link">
    <span class="md-ellipsis">
      What is RASP?
    </span>
  </a>
  
    <nav class="md-nav" aria-label="What is RASP?">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#available-rasp-checks" class="md-nav__link">
    <span class="md-ellipsis">
      Which RASP checks are available?
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#how-is-rasp-injected" class="md-nav__link">
    <span class="md-ellipsis">
      How is RASP injected?
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#enabling-rasp-checks" class="md-nav__link">
    <span class="md-ellipsis">
      Enabling RASP checks
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#addressing-rasp-check-limitations" class="md-nav__link">
    <span class="md-ellipsis">
      Addressing RASP check limitations
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#reacting-to-rasp-checks" class="md-nav__link">
    <span class="md-ellipsis">
      Reacting to RASP checks
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Reacting to RASP checks">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#crashing-on-detection" class="md-nav__link">
    <span class="md-ellipsis">
      Crashing on detection
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#monitoring-threats" class="md-nav__link">
    <span class="md-ellipsis">
      Monitoring threats
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#custom-reaction-strategies" class="md-nav__link">
    <span class="md-ellipsis">
      Custom reaction strategies
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#verification" class="md-nav__link">
    <span class="md-ellipsis">
      Verification
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Verification">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#size" class="md-nav__link">
    <span class="md-ellipsis">
      Size
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#performance" class="md-nav__link">
    <span class="md-ellipsis">
      Performance
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="runtime-application-self-protection">Runtime Application Self-Protection<a class="headerlink" href="#runtime-application-self-protection" title="Permanent link">&para;</a></h1>
<h2 id="what-is-rasp">What is RASP?<a class="headerlink" href="#what-is-rasp" title="Permanent link">&para;</a></h2>
<p>Runtime Application Self-Protection (RASP) enables applications and libraries
to defend themselves against analysis and attacks at runtime.
DexGuard's various RASP checks monitor, at runtime,
the integrity of the application or library and its execution environment.</p>
<p>DexGuard's legacy RASP implementation relied on the user manually adding calls
to the DexGuard runtime library in their application.
This page covers how DexGuard offloads this burden from the user by automatically injecting these calls,
while at the same time providing numerous other benefits:</p>
<ul>
<li><strong>Security</strong>: The locations of the RASP checks are automatically randomized across builds.</li>
<li><strong>Monitoring</strong>: Detected threats can be monitored on Guardsquare's <a href="threatcast.html" target="_blank">ThreatCast</a> dashboard.</li>
<li><strong>Strategies</strong>: Multiple injection strategies allow you to fine-tune your RASP protection.</li>
<li><strong>Maintenance</strong>: You are no longer required to manually add code in your project.</li>
<li><strong>Updates</strong>: Automatic RASP routinely benefits from performance and security related updates.</li>
</ul>
<div class="admonition warning">
<p class="admonition-title">The DexGuard runtime library is planned for deprecation. Please replace usages of the DexGuard runtime library with automatic RASP checks.</p>
<p>For a quick start with the migration, please refer the automatic <a href="migrationtoautorasp.html">RASP migration guide</a>.</p>
<p>If your project performs some action when you detect a threat,
you can still <a href="#callback-implementation-configuration">configure one or more callbacks</a>
to perform the same action for the automatic checks.</p>
<p>If you rely on controlling the locations of the checks,
automatic RASP offers the same control with the <a href="#how-is-rasp-injected">checkpoint injection strategy</a>.</p>
</div>
<div class="admonition danger">
<p class="admonition-title">RASP will only be enabled if obfuscation is also enabled</p>
<p>Enabling RASP will only have an effect if obfuscation is enabled for your application or library.
Concretely, RASP will only be enabled if your DexGuard configuration does <strong>not</strong> contain <code>-dontobfuscate</code>.
Notably, the <code>dexguard-debug.pro</code> and <code>dexguard-library-debug.pro</code> default configurations disable obfuscation.
Any builds (most likely debug builds) that use either of those default configurations will <strong>not</strong>
be protected with RASP.</p>
</div>
<h3 id="available-rasp-checks">Which RASP checks are available?<a class="headerlink" href="#available-rasp-checks" title="Permanent link">&para;</a></h3>
<p>The table below shows an overview of the RASP checks DexGuard provides.</p>
<table>
<thead>
<tr>
<th>Detector</th>
<th>Description</th>
<th>Configuration name</th>
</tr>
</thead>
<tbody>
<tr>
<td>Root</td>
<td>Checks if your application is running on a rooted device.</td>
<td>root</td>
</tr>
<tr>
<td>Hook</td>
<td>Checks for the presence of hooking frameworks, and safeguards user code from function hooks.</td>
<td>hook</td>
</tr>
<tr>
<td>Debug</td>
<td>Checks if your application can be debugged or is being debugged.</td>
<td>debug</td>
</tr>
<tr>
<td>Memory scanning</td>
<td>Detects if the application's memory has been scanned by a memory scanner.</td>
<td>memoryscanning</td>
</tr>
<tr>
<td>Emulator</td>
<td>Checks if your application is running on an emulator.</td>
<td>emulator</td>
</tr>
<tr>
<td>Virtual environment</td>
<td>Checks if your application is running inside a virtual environment.</td>
<td>virtualenvironment</td>
</tr>
<tr>
<td>Tamper</td>
<td>Detects static tampering on your app.</td>
<td>apptamper</td>
</tr>
<tr>
<td>Certificate checker</td>
<td>Checks whether the app is still signed with trusted certificates.</td>
<td>certificatetamper</td>
</tr>
<tr>
<td>Hardware</td>
<td>Checks the integrity of the device. For more information, see the <a href="features/hardware.html">OS Integrity</a> page.</td>
<td>hardware</td>
</tr>
</tbody>
</table>
<div class="admonition warning">
<p class="admonition-title">Check out the <a href="#addressing-rasp-check-limitations">Addressing RASP check limitations</a> section!</p>
<p>Depending on your project type, some of these detectors require additional configuration.
Without it, false positives could occur.</p>
<p>Make sure to read the <a href="#addressing-rasp-check-limitations">Addressing RASP check limitations</a>
section to understand and address these limitations.</p>
</div>
<h3 id="how-is-rasp-injected">How is RASP injected?<a class="headerlink" href="#how-is-rasp-injected" title="Permanent link">&para;</a></h3>
<p>DexGuard offers 3 complementary approaches to control injection locations:</p>
<table>
<thead>
<tr>
<th>Strategy</th>
<th>Details</th>
<th>Recommended use case</th>
</tr>
</thead>
<tbody>
<tr>
<td>Entrypoint</td>
<td>Checks will run when the application starts or when a public method of the SDK is called for the first time.</td>
<td>This approach is advised if you need to guarantee the integrity from startup.</td>
</tr>
<tr>
<td>Checkpoint</td>
<td>Checks will run before the specified methods are executed.</td>
<td>This approach is advised for security-sensitive methods such as user authentication or transaction methods.</td>
</tr>
<tr>
<td>Spray</td>
<td>Checks will be sprayed across all available code.</td>
<td>This approach ensures different injection locations for every build as an additional measure against scalable attacks.</td>
</tr>
</tbody>
</table>
<p>For optimal security it is recommended to combine these strategies.
The next section contains instructions on enabling and configuring RASP checks in your project.</p>
<hr />
<h2 id="enabling-rasp-checks">Enabling RASP checks<a class="headerlink" href="#enabling-rasp-checks" title="Permanent link">&para;</a></h2>
<div class="admonition danger">
<p class="admonition-title">Your application or library will start crashing on compromised devices</p>
<p>Most RASP checks <strong>will crash your protected application or library by default</strong> if they trigger.
These <strong>intended</strong> crashes will start happening once you enable RASP checks.
Please see the <a href="#crashing-on-detection">crashing on detection</a> section for more detail.</p>
</div>
<p>Enabling RASP checks is done with the
<a href="usage.html#raspoptions" target="_blank"><code>-raspchecks &lt;detector...&gt; [injection_strategy]</code></a> option.
The option allows to specify which detectors to enable, and which injection strategy to apply.</p>
<p>The examples below illustrate how you can use the <code>-raspchecks</code> option and highlight some of its nuances.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="1:2"><input checked="checked" id="configuring-spray--entrypoint-injection" name="__tabbed_1" type="radio" /><input id="configuring-checkpoint-injection" name="__tabbed_1" type="radio" /><div class="tabbed-labels"><label for="configuring-spray--entrypoint-injection">Configuring spray &amp; entrypoint injection</label><label for="configuring-checkpoint-injection">Configuring checkpoint injection</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="language-dexguard highlight"><span class="filename">Enabling specific detectors while disabling others</span><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="c"># If you do not specify a strategy, spray and entrypoint will be used by default:</span>
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="c"># Enable spray and entrypoint injection for the emulator and apptamper checks.</span>
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="err">-</span><span class="kt">raspchecks</span> <span class="kt">emulator</span><span class="p">,</span><span class="kt">apptamper</span>
</span><span id="__span-0-4"><a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>
</span><span id="__span-0-5"><a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="c"># This configuration is explicit, but has exactly the same effect.</span>
</span><span id="__span-0-6"><a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="c"># -raspchecks emulator,apptamper spray</span>
</span><span id="__span-0-7"><a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="c"># -raspchecks emulator,apptamper entrypoint</span>
</span></code></pre></div>
<div class="language-dexguard highlight"><span class="filename">Disabling specific detectors while enabling others</span><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="c"># Enable spray and entrypoint injection for all detectors except for the emulator detector.</span>
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="err">-</span><span class="kt">raspchecks</span> <span class="err">!</span><span class="kt">emulator</span>
</span></code></pre></div>
<div class="language-dexguard highlight"><span class="filename">Enabling all detectors using a wildcard</span><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="c"># Enable spray and entrypoint injection for all detectors.</span>
</span><span id="__span-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="err">-</span><span class="kt">raspchecks</span> <span class="kt">*</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<p>Checkpoint injection configuration is similar to the configuration for entrypoint and spray injection,
but additionally requires a method specification for the target methods. Note that descriptive names for checkpoint
methods that are not obfuscated are <strong>not</strong> allowed since they can lead to a checkpoint being easily located and
then bypassed.</p>
<p>Similarly, selecting only a single method as a checkpoint for each detector, while not also using entrypoint and/or
spray injection strategies, makes the RASP check easier to find and bypass by malicious actors. Especially if the
selected checkpoint doesn't have any side-effects of its own. While we don't disallow this practice, we strongly
discourage it as it weakens the resilience of your application.</p>
<div class="language-dexguard highlight"><span class="filename">Configuring a checkpoint location for a specific detector</span><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="c"># Guarantees execution of root and hook detectors just before</span>
</span><span id="__span-3-2"><a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a><span class="c"># com.example.Class.sensitiveAction is executed.</span>
</span><span id="__span-3-3"><a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a><span class="err">-</span><span class="kt">raspchecks</span> <span class="kt">root</span><span class="p">,</span><span class="kt">hook</span> <span class="kt">checkpoint</span> <span class="kd">class </span><span class="nc">com.example.Class </span><span class="p">{</span>
</span><span id="__span-3-4"><a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a>  <span class="kt">void</span> <span class="nf">sensitiveAction</span><span class="p">();</span>
</span><span id="__span-3-5"><a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a><span class="p">}</span>
</span></code></pre></div>
<div class="language-dexguard highlight"><span class="filename">Configuring a checkpoint location for all detectors</span><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="c"># Guarantees execution of all detectors before</span>
</span><span id="__span-4-2"><a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a><span class="c"># com.example.Class.sensitiveAction is executed.</span>
</span><span id="__span-4-3"><a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a><span class="err">-</span><span class="kt">raspchecks</span> <span class="kt">*</span> <span class="kt">checkpoint</span> <span class="kd">class </span><span class="nc">com.example.Class </span><span class="p">{</span>
</span><span id="__span-4-4"><a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a>  <span class="kt">void</span> <span class="nf">sensitiveAction</span><span class="p">();</span>
</span><span id="__span-4-5"><a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a><span class="p">}</span>
</span></code></pre></div>
<div class="language-dexguard highlight"><span class="filename">Configuring a checkpoint for all detectors except certain ones</span><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="c"># Guarantees execution of all detectors except emulator and root before</span>
</span><span id="__span-5-2"><a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a><span class="c"># com.example.Class.sensitiveAction is executed.</span>
</span><span id="__span-5-3"><a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a><span class="err">-</span><span class="kt">raspchecks</span> <span class="err">!</span><span class="kt">emulator</span><span class="p">,</span><span class="err">!</span><span class="kt">root</span> <span class="kt">checkpoint</span> <span class="kd">class </span><span class="nc">com.example.Class </span><span class="p">{</span>
</span><span id="__span-5-4"><a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a>  <span class="kt">void</span> <span class="nf">sensitiveAction</span><span class="p">();</span>
</span><span id="__span-5-5"><a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a><span class="p">}</span>
</span></code></pre></div>
<p>As mentioned before, if the configured checkpoint method is not obfuscated and has a descriptive name, DexGuard will
terminate and ask for the name to be changed. However, in the scenario where you select checkpoints in code you don't
own, and thus cannot change, which also needs to be kept, you can allow the checkpoint to have a descriptive name.
<strong>We do want to stress that this should only be done in the mentioned case and not for checkpoints in your own code!
Use this option at your own risk!</strong></p>
<div class="language-dexguard highlight"><span class="filename">Allow a checkpoint to have a descriptive name</span><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="err">-</span><span class="kt">raspchecks</span> <span class="kt">root</span> <span class="kt">checkpoint</span><span class="p">,</span><span class="kt">allowdescriptivenames</span> <span class="kd">class </span><span class="nc">com.example.Class </span><span class="p">{</span>
</span><span id="__span-6-2"><a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a>    <span class="kt">void</span> <span class="nf">sensitiveAction</span><span class="p">();</span>
</span><span id="__span-6-3"><a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a><span class="p">}</span>
</span></code></pre></div>
<h4 id="wildcards">Wildcards<a class="headerlink" href="#wildcards" title="Permanent link">&para;</a></h4>
<p>You can use wildcards in the checkpoint class specification, but <strong>DexGuard will not allow you to
have over 1000 methods targeted</strong> in this way to guard against defining too many checkpoints accidentally.</p>
<p>The hardware checker is not enabled when using a wildcard to enable all detectors!
The hardware checker needs to be explicitly listed in your <code>-raspchecks</code> option for it to be injected:</p>
<div class="language-dexguard highlight"><span class="filename">Enable all detectors, including the hardware checker</span><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="err">-</span><span class="kt">raspchecks</span> <span class="kt">*</span><span class="p">,</span><span class="kt">hardware</span>
</span></code></pre></div>
<p>Please refer to the <a href="features/hardware.html">OS Integrity</a> page for more information.</p>
</div>
</div>
</div>
<div class="admonition note">
<p class="admonition-title">RASP checks have an impact on application performance!</p>
<p>As they are executed during runtime, RASP checks will introduce a performance overhead to your application
or library.
Tuning your RASP performance impact is described in detail in the <a href="#performance">performance section</a> below.</p>
</div>
<details class="tip">
<summary>Check out the sample projects!</summary>
<p>You can find several sample projects in your DexGuard distribution:</p>
<ul>
<li><code>samples/features/RASP</code></li>
<li><code>samples/features/RASPInLibraryProject</code></li>
<li><code>samples/features/ThreatCastTamperDetection</code></li>
</ul>
</details>
<h2 id="addressing-rasp-check-limitations">Addressing RASP check limitations<a class="headerlink" href="#addressing-rasp-check-limitations" title="Permanent link">&para;</a></h2>
<p>Some RASP detectors have certain limitations depending on your project and setup.
These can be addressed with some additional configuration.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="2:4"><input checked="checked" id="certificate-checker" name="__tabbed_2" type="radio" /><input id="root-detector" name="__tabbed_2" type="radio" /><input id="debug-blocker" name="__tabbed_2" type="radio" /><input id="tamper-detector" name="__tabbed_2" type="radio" /><div class="tabbed-labels"><label for="certificate-checker">Certificate checker</label><label for="root-detector">Root detector</label><label for="debug-blocker">Debug Blocker</label><label for="tamper-detector">Tamper detector</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>In the following use cases, DexGuard's inputs won't have the required signing information for the certificate checker.</p>
<table>
<thead>
<tr>
<th>Use case</th>
<th>Reason</th>
</tr>
</thead>
<tbody>
<tr>
<td>Play App Signing</td>
<td>Google Play manages signing of your app on your behalf.</td>
</tr>
<tr>
<td>App Bundle projects</td>
<td>App bundles defer app signing to Google Play.</td>
</tr>
<tr>
<td>Re-signing your APK</td>
<td>App signing is deferred to a later step in the build.</td>
</tr>
</tbody>
</table>
<p>Additional configuration is thus required to support the certificate checker.
To this end, you should use the <code>-raspcertificatehash</code> option.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="3:2"><input checked="checked" id="play-app-signing" name="__tabbed_3" type="radio" /><input id="apk-re-signing" name="__tabbed_3" type="radio" /><div class="tabbed-labels"><label for="play-app-signing">Play App Signing</label><label for="apk-re-signing">APK re-signing</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>Provide the certificate hash from the <em>App Signing</em> section on your App Play console.</p>
<div class="language-dexguard highlight"><span class="filename">Configuring certificate hashes for Play App signing</span><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="c"># WARNING: This certificate hash is only an example. DexGuard will throw an error if you try to use this exact certificate hash.</span>
</span><span id="__span-8-2"><a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a><span class="err">-</span><span class="kt">raspcertificatehash</span> <span class="err">&quot;</span><span class="kt">EB</span><span class="p">:</span><span class="kt">B0</span><span class="p">:</span><span class="kt">FE</span><span class="p">:</span><span class="kt">DF</span><span class="p">:</span><span class="kt">19</span><span class="p">:</span><span class="kt">42</span><span class="p">:</span><span class="kt">A0</span><span class="p">:</span><span class="kt">99</span><span class="p">:</span><span class="kt">B2</span><span class="p">:</span><span class="kt">87</span><span class="p">:</span><span class="kt">C3</span><span class="p">:</span><span class="kt">DB</span><span class="p">:</span><span class="kt">00</span><span class="p">:</span><span class="kt">FF</span><span class="p">:</span><span class="kt">73</span><span class="p">:</span><span class="kt">21</span><span class="p">:</span><span class="kt">62</span><span class="p">:</span><span class="kt">15</span><span class="p">:</span><span class="kt">24</span><span class="p">:</span><span class="kt">81</span><span class="p">:</span><span class="kt">AB</span><span class="p">:</span><span class="kt">B2</span><span class="p">:</span><span class="kt">B6</span><span class="p">:</span><span class="kt">C7</span><span class="p">:</span><span class="kt">CB</span><span class="p">:</span><span class="kt">CD</span><span class="p">:</span><span class="kt">B2</span><span class="p">:</span><span class="kt">BA</span><span class="p">:</span><span class="kt">58</span><span class="p">:</span><span class="kt">94</span><span class="p">:</span><span class="kt">A7</span><span class="p">:</span><span class="kt">68</span><span class="err">&quot;</span>
</span><span id="__span-8-3"><a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a><span class="err">-</span><span class="kt">raspcertificatehash</span> <span class="err">&quot;</span><span class="kt">EBB0FEDF1942A099B287C3DB00FF732162152481ABB2B6C7CBCDB2BA5894A768</span><span class="err">&quot;</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<p>Provide the certificate hash of the final APK.</p>
<div class="language-dexguard highlight"><span class="filename">Configuring certificate hashes for APK re-signing</span><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="c"># WARNING: This certificate hash is only an example. DexGuard will throw an error if you try to use this exact certificate hash.</span>
</span><span id="__span-9-2"><a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a><span class="err">-</span><span class="kt">raspcertificatehash</span> <span class="err">&quot;</span><span class="kt">EB</span><span class="p">:</span><span class="kt">B0</span><span class="p">:</span><span class="kt">FE</span><span class="p">:</span><span class="kt">DF</span><span class="p">:</span><span class="kt">19</span><span class="p">:</span><span class="kt">42</span><span class="p">:</span><span class="kt">A0</span><span class="p">:</span><span class="kt">99</span><span class="p">:</span><span class="kt">B2</span><span class="p">:</span><span class="kt">87</span><span class="p">:</span><span class="kt">C3</span><span class="p">:</span><span class="kt">DB</span><span class="p">:</span><span class="kt">00</span><span class="p">:</span><span class="kt">FF</span><span class="p">:</span><span class="kt">73</span><span class="p">:</span><span class="kt">21</span><span class="p">:</span><span class="kt">62</span><span class="p">:</span><span class="kt">15</span><span class="p">:</span><span class="kt">24</span><span class="p">:</span><span class="kt">81</span><span class="p">:</span><span class="kt">AB</span><span class="p">:</span><span class="kt">B2</span><span class="p">:</span><span class="kt">B6</span><span class="p">:</span><span class="kt">C7</span><span class="p">:</span><span class="kt">CB</span><span class="p">:</span><span class="kt">CD</span><span class="p">:</span><span class="kt">B2</span><span class="p">:</span><span class="kt">BA</span><span class="p">:</span><span class="kt">58</span><span class="p">:</span><span class="kt">94</span><span class="p">:</span><span class="kt">A7</span><span class="p">:</span><span class="kt">68</span><span class="err">&quot;</span>
</span><span id="__span-9-3"><a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a><span class="err">-</span><span class="kt">raspcertificatehash</span> <span class="err">&quot;</span><span class="kt">EBB0FEDF1942A099B287C3DB00FF732162152481ABB2B6C7CBCDB2BA5894A768</span><span class="err">&quot;</span>
</span></code></pre></div>
</div>
</div>
</div>
<p>The certificate hash can be provided with or without the colons.
Only the SHA-256 hash is supported.</p>
<div class="admonition warning">
<p class="admonition-title">Don't specify the Android debug keystore certificate hashes!</p>
<p>Android provides a default <em>debug.keystore</em>.
If you specify its certificate hashes, the certificate checker will not detect when attackers
re-sign your application with this keystore.</p>
</div>
<details class="tip">
<summary>Multiple certificate hashes are supported.</summary>
<p>In case you use different certificates to sign different builds (e.g local &amp; release),
you can specify multiple certificate hashes.</p>
<div class="language-dexguard highlight"><pre><span></span><code><span id="__span-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="c"># A certificate hash for a local build.</span>
</span><span id="__span-10-2"><a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a><span class="err">-</span><span class="kt">raspcertificatehash</span> <span class="err">&quot;</span><span class="kt">73</span><span class="p">:</span><span class="kt">21</span><span class="p">:</span><span class="kt">62</span><span class="p">:</span><span class="kt">15</span><span class="p">:</span><span class="kt">24</span><span class="p">:</span><span class="kt">81</span><span class="p">:</span><span class="kt">AB</span><span class="p">:</span><span class="kt">B2</span><span class="p">:</span><span class="kt">B6</span><span class="p">:</span><span class="kt">C7</span><span class="p">:</span><span class="kt">CB</span><span class="p">:</span><span class="kt">CD</span><span class="p">:</span><span class="kt">B2</span><span class="p">:</span><span class="kt">BA</span><span class="p">:</span><span class="kt">58</span><span class="p">:</span><span class="kt">94</span><span class="p">:</span><span class="kt">A7</span><span class="p">:</span><span class="kt">68</span><span class="p">:</span><span class="kt">EB</span><span class="p">:</span><span class="kt">B0</span><span class="p">:</span><span class="kt">FE</span><span class="p">:</span><span class="kt">DF</span><span class="p">:</span><span class="kt">19</span><span class="p">:</span><span class="kt">42</span><span class="p">:</span><span class="kt">A0</span><span class="p">:</span><span class="kt">99</span><span class="p">:</span><span class="kt">B2</span><span class="p">:</span><span class="kt">87</span><span class="p">:</span><span class="kt">C3</span><span class="p">:</span><span class="kt">DB</span><span class="p">:</span><span class="kt">00</span><span class="p">:</span><span class="kt">FF</span><span class="err">&quot;</span>
</span><span id="__span-10-3"><a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a><span class="c"># A certificate hash for a release build.</span>
</span><span id="__span-10-4"><a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a><span class="err">-</span><span class="kt">raspcertificatehash</span> <span class="err">&quot;</span><span class="kt">AB</span><span class="p">:</span><span class="kt">B2</span><span class="p">:</span><span class="kt">B6</span><span class="p">:</span><span class="kt">C7</span><span class="p">:</span><span class="kt">CB</span><span class="p">:</span><span class="kt">CD</span><span class="p">:</span><span class="kt">B2</span><span class="p">:</span><span class="kt">BA</span><span class="p">:</span><span class="kt">58</span><span class="p">:</span><span class="kt">73</span><span class="p">:</span><span class="kt">21</span><span class="p">:</span><span class="kt">62</span><span class="p">:</span><span class="kt">15</span><span class="p">:</span><span class="kt">24</span><span class="p">:</span><span class="kt">81</span><span class="p">:</span><span class="kt">94</span><span class="p">:</span><span class="kt">A7</span><span class="p">:</span><span class="kt">68</span><span class="p">:</span><span class="kt">EB</span><span class="p">:</span><span class="kt">B0</span><span class="p">:</span><span class="kt">FE</span><span class="p">:</span><span class="kt">DF</span><span class="p">:</span><span class="kt">19</span><span class="p">:</span><span class="kt">42</span><span class="p">:</span><span class="kt">A0</span><span class="p">:</span><span class="kt">99</span><span class="p">:</span><span class="kt">B2</span><span class="p">:</span><span class="kt">87</span><span class="p">:</span><span class="kt">C3</span><span class="p">:</span><span class="kt">DB</span><span class="p">:</span><span class="kt">00</span><span class="p">:</span><span class="kt">FF</span><span class="err">&quot;</span>
</span></code></pre></div>
</details>
</div>
<div class="tabbed-block">
<p>When configuring checkpoints for the root detector, please note that some root checks
will only trigger when the check is performed on the main thread.
If checkpoints are only executed in background threads, some root setups might be missed.
In applications that have entrypoint and spray configured, the locations used for injection will automatically
ensure these checks run on the main thread.</p>
</div>
<div class="tabbed-block">
<p>By default, DexGuard injects a debug blocker as part of the debug checks.
The debug blocker is a feature that blocks debugger processes from attaching to your application,
which prevents your application from being debugged at runtime.</p>
<p>However, if you use an SDK that has a debug detection functionality embedded,
the debug blocker may be detected as a debugger by that SDK.
In case this causes issues, you can disable the debug blocker feature by adding the following to your DexGuard
configuration:</p>
<div class="language-dexguard highlight"><pre><span></span><code><span id="__span-11-1"><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a><span class="err">-</span><span class="kt">dontinjectdebugblocker</span>
</span></code></pre></div>
<div class="admonition success">
<p class="admonition-title">SDKs protected by DexGuard v9.4 and above are compatible and won't require this option.</p>
</div>
</div>
<div class="tabbed-block">
<p>The tamper detector requires <code>-disableapktamper</code> to be specified in your configuration if you are building an APK
and signing it after processing with DexGuard.</p>
<p>This detector cannot be used for libraries (.aar).</p>
</div>
</div>
</div>
<hr />
<h2 id="reacting-to-rasp-checks">Reacting to RASP checks<a class="headerlink" href="#reacting-to-rasp-checks" title="Permanent link">&para;</a></h2>
<p>The previous sections covered how to enable and configure RASP checks.
What happens when these checks detect a threat is defined by your reaction strategy.
Do you want to disallow the user to continue using the app?
Do you want to monitor detected integrity violations?
Do you want some custom reaction?
DexGuard provides solutions for each of these use cases.</p>
<p>This section covers how to configure your desired reactions to threats.</p>
<h3 id="crashing-on-detection">Crashing on detection<a class="headerlink" href="#crashing-on-detection" title="Permanent link">&para;</a></h3>
<p>Disallowing users to continue using the app when a RASP detector triggers involves crashing the application.
This is the default behaviour for most RASP checks, but there are some exceptions due to the risk of false positives.
More specifically the root, virtual environment and hook detectors rely on complex heuristics and are therefore more
likely than others to return false positives.
Because of this, they don't crash the application by default.</p>
<div class="admonition tip">
<p class="admonition-title">Use ThreatCast to monitor your RASP checks before enabling app crashing.</p>
<p>We recommend a strategy where you initially release in a monitoring-only mode,
using <a href="threatcast.html" target="_blank">ThreatCast</a>, to prevent any impact to your users.
After this initial monitoring period, crashing can be enabled for these checks.</p>
</div>
<p>The table below gives an overview of the default crashing behaviour of the various RASP checks.</p>
<table>
<thead>
<tr>
<th>Default threat behaviour</th>
<th>Detectors</th>
</tr>
</thead>
<tbody>
<tr>
<td>Crash</td>
<td>Debug, Emulator, Tamper, Certificate checker, Hardware</td>
</tr>
<tr>
<td>Continue</td>
<td>Root, Hook, Memory scanning, Virtual environment</td>
</tr>
</tbody>
</table>
<p>This default behaviour can be overwritten with the <code>-raspcontinueon</code> option.
Here are some example usages of the <code>-raspcontinueon</code> option:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="4:2"><input checked="checked" id="dont-crash-for-specific-detectors" name="__tabbed_4" type="radio" /><input id="crash-for-specific-detectors" name="__tabbed_4" type="radio" /><div class="tabbed-labels"><label for="dont-crash-for-specific-detectors">Don't crash for specific detector(s)</label><label for="crash-for-specific-detectors">Crash for specific detector(s)</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="language-dexguard highlight"><span class="filename">Emulator and virtual environments</span><pre><span></span><code><span id="__span-12-1"><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a><span class="c"># The app is allowed to run on an emulator or in a virtual environment.</span>
</span><span id="__span-12-2"><a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a><span class="c"># Detection of any other type of threat will crash the application.</span>
</span><span id="__span-12-3"><a id="__codelineno-12-3" name="__codelineno-12-3" href="#__codelineno-12-3"></a><span class="hll"><span class="err">-</span><span class="kt">raspcontinueon</span> <span class="kt">emulator</span><span class="p">,</span><span class="kt">virtualenvironment</span>
</span></span><span id="__span-12-4"><a id="__codelineno-12-4" name="__codelineno-12-4" href="#__codelineno-12-4"></a>
</span><span id="__span-12-5"><a id="__codelineno-12-5" name="__codelineno-12-5" href="#__codelineno-12-5"></a><span class="c"># DexGuard interprets this configuration as follows:</span>
</span><span id="__span-12-6"><a id="__codelineno-12-6" name="__codelineno-12-6" href="#__codelineno-12-6"></a><span class="c"># -raspcontinueon emulator,virtualenvironment,!root,!hook,!...</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="language-dexguard highlight"><span class="filename">Only crash on emulator and root</span><pre><span></span><code><span id="__span-13-1"><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a><span class="c"># The app is not allowed to run on an emulator nor on a rooted device.</span>
</span><span id="__span-13-2"><a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a><span class="c"># Detection of any other type of threat will not crash the application.</span>
</span><span id="__span-13-3"><a id="__codelineno-13-3" name="__codelineno-13-3" href="#__codelineno-13-3"></a><span class="hll"><span class="err">-</span><span class="kt">raspcontinueon</span> <span class="err">!</span><span class="kt">emulator</span><span class="p">,</span><span class="err">!</span><span class="kt">root</span>
</span></span><span id="__span-13-4"><a id="__codelineno-13-4" name="__codelineno-13-4" href="#__codelineno-13-4"></a>
</span><span id="__span-13-5"><a id="__codelineno-13-5" name="__codelineno-13-5" href="#__codelineno-13-5"></a><span class="c"># DexGuard interprets this configuration as follows:</span>
</span><span id="__span-13-6"><a id="__codelineno-13-6" name="__codelineno-13-6" href="#__codelineno-13-6"></a><span class="c"># -raspcontinueon !emulator,virtualenvironment,!root,hook,...</span>
</span></code></pre></div>
</div>
</div>
</div>
<p>There are also wildcards available if you want the same behaviour for all detectors.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="5:2"><input checked="checked" id="never-crash-the-application" name="__tabbed_5" type="radio" /><input id="always-crash-the-application" name="__tabbed_5" type="radio" /><div class="tabbed-labels"><label for="never-crash-the-application">Never crash the application</label><label for="always-crash-the-application">Always crash the application</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="language-dexguard highlight"><span class="filename">Don't crash for any detectors.</span><pre><span></span><code><span id="__span-14-1"><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a><span class="c"># Never crash the application regardless of threats.</span>
</span><span id="__span-14-2"><a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a><span class="err">-</span><span class="kt">raspcontinueon</span> <span class="kt">*</span>
</span><span id="__span-14-3"><a id="__codelineno-14-3" name="__codelineno-14-3" href="#__codelineno-14-3"></a>
</span><span id="__span-14-4"><a id="__codelineno-14-4" name="__codelineno-14-4" href="#__codelineno-14-4"></a><span class="c"># DexGuard interprets this configuration as follows:</span>
</span><span id="__span-14-5"><a id="__codelineno-14-5" name="__codelineno-14-5" href="#__codelineno-14-5"></a><span class="c"># -raspcontinueon emulator,virtualenvironment,root,hook,...</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="language-dexguard highlight"><span class="filename">Don't crash for any detectors.</span><pre><span></span><code><span id="__span-15-1"><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a><span class="c"># Crash the application for any type of detected threat.</span>
</span><span id="__span-15-2"><a id="__codelineno-15-2" name="__codelineno-15-2" href="#__codelineno-15-2"></a><span class="err">-</span><span class="kt">raspcontinueon</span> <span class="kt">none</span>
</span><span id="__span-15-3"><a id="__codelineno-15-3" name="__codelineno-15-3" href="#__codelineno-15-3"></a>
</span><span id="__span-15-4"><a id="__codelineno-15-4" name="__codelineno-15-4" href="#__codelineno-15-4"></a><span class="c"># DexGuard interprets this configuration as follows:</span>
</span><span id="__span-15-5"><a id="__codelineno-15-5" name="__codelineno-15-5" href="#__codelineno-15-5"></a><span class="c"># -raspcontinueon !emulator,!virtualenvironment,!root,!hook,...</span>
</span></code></pre></div>
</div>
</div>
</div>
<div class="admonition warning">
<p class="admonition-title">The <code>-raspcontinueon</code> option overrides default behaviour.</p>
<div class="language-dexguard highlight"><span class="filename">Continues only for emulator checks, crashes for any other checks.</span><pre><span></span><code><span id="__span-16-1"><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a><span class="err">-</span><span class="kt">raspcontinueon</span> <span class="kt">emulator</span>
</span></code></pre></div>
<p>The above option also overrides the default behaviour of other checks.
When using this option, be very explicit what types of threats warrant crashes!</p>
<div class="language-dexguard highlight"><span class="filename">Preserves default behaviour while not crashing for emulator checks.</span><pre><span></span><code><span id="__span-17-1"><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a><span class="err">-</span><span class="kt">raspcontinueon</span> <span class="kt">emulator</span><span class="p">,</span><span class="kt">root</span><span class="p">,</span><span class="kt">hook</span><span class="p">,</span><span class="kt">virtualenvironment</span><span class="p">,</span><span class="kt">memoryscanning</span>
</span></code></pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Crashing does not influence other reactions to threats.</p>
<p>Any additional reactions to threats you implement (callbacks, ThreatCast) will be
executed <strong>before</strong> the application crashes.
<strong>All reaction strategies are compatible with each other.</strong></p>
</div>
<details class="tip" open="open">
<summary>Crashing improves resilience significantly!</summary>
<p>Crashing your app might seem scary, but it significantly increases the resilience
of your application as adversaries will need to restart their efforts over and over again.
We recommend invoking DexGuard's crashing mechanism for as many detectors as you are comfortable with.</p>
</details>
<h5 id="identifying-crashes-due-to-rasp">Identifying crashes due to RASP<a class="headerlink" href="#identifying-crashes-due-to-rasp" title="Permanent link">&para;</a></h5>
<p>When the app crashes because of a RASP check triggering,
the stack trace appears unrelated to RASP to hide information from attackers.</p>
<div class="language-text highlight"><span class="filename">Example stack trace (stripped for readability)</span><pre><span></span><code><span id="__span-18-1"><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a><span class="hll">RuntimeException: Unable to start activity:
</span></span><span id="__span-18-2"><a id="__codelineno-18-2" name="__codelineno-18-2" href="#__codelineno-18-2"></a><span class="hll">  NullPointerException: Attempt to invoke method on a null object reference
</span></span><span id="__span-18-3"><a id="__codelineno-18-3" name="__codelineno-18-3" href="#__codelineno-18-3"></a>  // ...
</span><span id="__span-18-4"><a id="__codelineno-18-4" name="__codelineno-18-4" href="#__codelineno-18-4"></a><span class="hll">Caused by:
</span></span><span id="__span-18-5"><a id="__codelineno-18-5" name="__codelineno-18-5" href="#__codelineno-18-5"></a><span class="hll">  NullPointerException: Attempt to invoke method on a null object reference
</span></span><span id="__span-18-6"><a id="__codelineno-18-6" name="__codelineno-18-6" href="#__codelineno-18-6"></a>    at com.example.HelloWorldActivity.onCreate (:259)
</span><span id="__span-18-7"><a id="__codelineno-18-7" name="__codelineno-18-7" href="#__codelineno-18-7"></a>    at android.app.Activity.performCreate (Activity.java:8000)
</span><span id="__span-18-8"><a id="__codelineno-18-8" name="__codelineno-18-8" href="#__codelineno-18-8"></a>    at android.app.Activity.performCreate (Activity.java:7984)
</span><span id="__span-18-9"><a id="__codelineno-18-9" name="__codelineno-18-9" href="#__codelineno-18-9"></a>    // ...
</span></code></pre></div>
<p>If you are monitoring crashes of your app, this makes it difficult to distinguish between
real application crashes and crashes caused by RASP.
To solve this issue, DexGuard encodes additional information regarding the RASP checks in the mapping file.
<a href="tools/retrace.html">Retracing</a> the stack trace with this mapping file, it will become clear whether 
the crash was initiated by a RASP check.
Below is the retraced version of the stack trace above, in which you can clearly see references to
the <code>EmulatorDetector</code>.</p>
<div class="language-text highlight"><span class="filename">Example retraced stack trace (stripped for readability)</span><pre><span></span><code><span id="__span-19-1"><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a>RuntimeException: Unable to start activity:
</span><span id="__span-19-2"><a id="__codelineno-19-2" name="__codelineno-19-2" href="#__codelineno-19-2"></a>  NullPointerException: Attempt to invoke method on a null object reference
</span><span id="__span-19-3"><a id="__codelineno-19-3" name="__codelineno-19-3" href="#__codelineno-19-3"></a>  // ...
</span><span id="__span-19-4"><a id="__codelineno-19-4" name="__codelineno-19-4" href="#__codelineno-19-4"></a>Caused by:
</span><span id="__span-19-5"><a id="__codelineno-19-5" name="__codelineno-19-5" href="#__codelineno-19-5"></a>  NullPointerException: Attempt to invoke method on a null object reference
</span><span id="__span-19-6"><a id="__codelineno-19-6" name="__codelineno-19-6" href="#__codelineno-19-6"></a><span class="hll">    at com.guardsquare.dexguard.detection.EmulatorDetector.EMULATOR (HelloWorldActivity.java:151)
</span></span><span id="__span-19-7"><a id="__codelineno-19-7" name="__codelineno-19-7" href="#__codelineno-19-7"></a><span class="hll">    at com.guardsquare.dexguard.detection.EmulatorDetector.EMULATOR (HelloWorldActivity.java:216)
</span></span><span id="__span-19-8"><a id="__codelineno-19-8" name="__codelineno-19-8" href="#__codelineno-19-8"></a>    at com.example.HelloWorldActivity.onCreate (HelloWorldActivity.java:24)
</span><span id="__span-19-9"><a id="__codelineno-19-9" name="__codelineno-19-9" href="#__codelineno-19-9"></a>    at android.app.Activity.performCreate (Activity.java:8000)
</span><span id="__span-19-10"><a id="__codelineno-19-10" name="__codelineno-19-10" href="#__codelineno-19-10"></a>    at android.app.Activity.performCreate (Activity.java:7984)
</span><span id="__span-19-11"><a id="__codelineno-19-11" name="__codelineno-19-11" href="#__codelineno-19-11"></a>    // ...
</span></code></pre></div>
<div class="admonition success">
<p class="admonition-title">This mapping file is compatible with crash reporting services that automatically retrace your stack trace, such as Crashlytics or Sentry.</p>
</div>
<hr />
<h3 id="monitoring-threats">Monitoring threats<a class="headerlink" href="#monitoring-threats" title="Permanent link">&para;</a></h3>
<p>You can monitor the threats your app is exposed to using Guardsquare's threat monitoring console.
For more details, check out the <a href="threatcast.html" target="_blank">ThreatCast</a> page!</p>
<hr />
<h3 id="custom-reaction-strategies">Custom reaction strategies<a class="headerlink" href="#custom-reaction-strategies" title="Permanent link">&para;</a></h3>
<p>DexGuard provides a callback system to support custom reaction strategies towards detected threats.
For example, you can implement your own notification mechanism, or limit the usability of the application for the
end-user after certain detections have triggered.</p>
<div class="admonition danger">
<p class="admonition-title">Custom callbacks are security risks!</p>
<p><strong>Incorrect usage of callbacks can lead to significant security risks and
can even make RASP ineffective.</strong></p>
<p>Callback methods can be considered a single point of failure.
A tampered callback method can essentially render the underlying RASP check useless. As a precaution, descriptive names for callback functions are <strong>not</strong> allowed since they can lead to a callback being easily located and then bypassed.
Under the hood, DexGuard tries to limit the impact of a compromised callback method, but the threat remains significant.</p>
</div>
<p>Use callbacks carefully and only when absolutely unavoidable. Try to avoid these typical mistakes when implementing your callback:</p>
<table>
<thead>
<tr>
<th>Typical mistake</th>
<th>Risk</th>
<th>Do this instead</th>
</tr>
</thead>
<tbody>
<tr>
<td>Using complex behavior in callbacks, e.g. displaying UI messages</td>
<td>The more complex the logic of a callback is, the more likely it is that the callback can be easily located.</td>
<td>Use simple or no custom behaviour on RASP checks.</td>
</tr>
<tr>
<td>Using unobfuscated symbols and strings in callbacks to react to RASP events</td>
<td>Using method names like <code>isAppTampered()</code> or enum values like <code>GUARDSQUARE_HOOKING</code>  enables an attacker to quickly determine the intended behavior, and later change it.</td>
<td>Obfuscate such identifiers and values or do not introduce them at all. Pentest your product to make sure that all sensitive information is hidden.</td>
</tr>
<tr>
<td>Conditionally terminating the application in a callback</td>
<td>An exit in a callback is a single point of failure, which can be easily located and then bypassed.</td>
<td>Use <code>-raspcontinueon none</code>: DexGuard's crash invocation is well hidden and much more cumbersome to locate.</td>
</tr>
<tr>
<td>Sending network threat monitoring messages in callbacks</td>
<td>Sending a network message may help locate the callback faster. In addition, having this reaction in a callback creates a single point of failure.</td>
<td>A better alternative is to use <a href="threatcast.html">ThreatCast</a> to monitor application runtime threats. Guardsquare will inject ThreatCast communication securely. The link between the communication message and the RASP check will be harder to trace when using ThreatCast.</td>
</tr>
<tr>
<td>Too mild response</td>
<td>Some threats unambiguously indicate that untrusted code is being executed, such as hooking or app integrity threats. A mild response to such threats (such as a message to the user) can accelerate the reverse engineering process.</td>
<td>If the application code has been modified, there is no reason to continue execution. Do not use callbacks and immediately terminate the application.</td>
</tr>
</tbody>
</table>
<h4 id="callback-implementation-configuration">Callback implementation &amp; configuration<a class="headerlink" href="#callback-implementation-configuration" title="Permanent link">&para;</a></h4>
<div class="tabbed-set tabbed-alternate" data-tabs="6:2"><input checked="checked" id="multiple-callbacks" name="__tabbed_6" type="radio" /><input id="deprecated-single-callback" name="__tabbed_6" type="radio" /><div class="tabbed-labels"><label for="multiple-callbacks">Multiple callbacks</label><label for="deprecated-single-callback">[Deprecated] Single callback</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>DexGuard supports unique callbacks for each type of RASP detector.
In your application's source code, add a method such as the following <code>myRaspCallback</code>
method for each RASP detector:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="7:2"><input checked="checked" id="kotlin" name="__tabbed_7" type="radio" /><input id="java" name="__tabbed_7" type="radio" /><div class="tabbed-labels"><label for="kotlin">Kotlin</label><label for="java">Java</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="language-Kotlin highlight"><pre><span></span><code><span id="__span-20-1"><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a><span class="kd">class</span><span class="w"> </span><span class="nc">HelloWorldActivity</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">Activity</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-20-2"><a id="__codelineno-20-2" name="__codelineno-20-2" href="#__codelineno-20-2"></a><span class="w">    </span><span class="kd">companion</span><span class="w"> </span><span class="kd">object</span><span class="w"> </span><span class="err">{</span>
</span><span id="__span-20-3"><a id="__codelineno-20-3" name="__codelineno-20-3" href="#__codelineno-20-3"></a><span class="w">        </span><span class="cm">/**</span>
</span><span id="__span-20-4"><a id="__codelineno-20-4" name="__codelineno-20-4" href="#__codelineno-20-4"></a><span class="cm">         * This is an optional DexGuard RASP callback method.</span>
</span><span id="__span-20-5"><a id="__codelineno-20-5" name="__codelineno-20-5" href="#__codelineno-20-5"></a><span class="cm">         * The callback method should match one of the supported callback signatures.</span>
</span><span id="__span-20-6"><a id="__codelineno-20-6" name="__codelineno-20-6" href="#__codelineno-20-6"></a><span class="cm">         * Refer to</span>
</span><span id="__span-20-7"><a id="__codelineno-20-7" name="__codelineno-20-7" href="#__codelineno-20-7"></a><span class="cm">         * &lt;a href=&quot;https://platform.guardsquare.com/manual/dexguard/stable/latest/rasp.html#supported-rasp-callback-signatures&quot;&gt;this section&lt;/a&gt;</span>
</span><span id="__span-20-8"><a id="__codelineno-20-8" name="__codelineno-20-8" href="#__codelineno-20-8"></a><span class="cm">         * of the manual for a complete list of supported signatures.</span>
</span><span id="__span-20-9"><a id="__codelineno-20-9" name="__codelineno-20-9" href="#__codelineno-20-9"></a><span class="cm">         *</span>
</span><span id="__span-20-10"><a id="__codelineno-20-10" name="__codelineno-20-10" href="#__codelineno-20-10"></a><span class="cm">         * &lt;p&gt;Any strings used in the callback will be automatically encrypted.</span>
</span><span id="__span-20-11"><a id="__codelineno-20-11" name="__codelineno-20-11" href="#__codelineno-20-11"></a><span class="cm">         *</span>
</span><span id="__span-20-12"><a id="__codelineno-20-12" name="__codelineno-20-12" href="#__codelineno-20-12"></a><span class="cm">         * @param debugInfo A long value containing encoded threat information.</span>
</span><span id="__span-20-13"><a id="__codelineno-20-13" name="__codelineno-20-13" href="#__codelineno-20-13"></a><span class="cm">         */</span>
</span><span id="__span-20-14"><a id="__codelineno-20-14" name="__codelineno-20-14" href="#__codelineno-20-14"></a><span class="w">        </span><span class="nd">@JvmStatic</span>
</span><span id="__span-20-15"><a id="__codelineno-20-15" name="__codelineno-20-15" href="#__codelineno-20-15"></a><span class="w">        </span><span class="kd">fun</span><span class="w"> </span><span class="nf">myRaspCallback</span><span class="p">(</span><span class="n">debugInfo</span><span class="p">:</span><span class="w"> </span><span class="kt">Long</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-20-16"><a id="__codelineno-20-16" name="__codelineno-20-16" href="#__codelineno-20-16"></a><span class="w">            </span><span class="n">Log</span><span class="p">.</span><span class="na">i</span><span class="p">(</span><span class="s">&quot;HelloWorldActivity&quot;</span><span class="p">,</span>
</span><span id="__span-20-17"><a id="__codelineno-20-17" name="__codelineno-20-17" href="#__codelineno-20-17"></a><span class="w">                  </span><span class="s">&quot;RASP threat detected. DebugInfo : &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">debugInfo</span><span class="p">)</span>
</span><span id="__span-20-18"><a id="__codelineno-20-18" name="__codelineno-20-18" href="#__codelineno-20-18"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-20-19"><a id="__codelineno-20-19" name="__codelineno-20-19" href="#__codelineno-20-19"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-20-20"><a id="__codelineno-20-20" name="__codelineno-20-20" href="#__codelineno-20-20"></a><span class="p">}</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="language-Java highlight"><pre><span></span><code><span id="__span-21-1"><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">HelloWorldActivity</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">Activity</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-21-2"><a id="__codelineno-21-2" name="__codelineno-21-2" href="#__codelineno-21-2"></a><span class="w">    </span><span class="cm">/**</span>
</span><span id="__span-21-3"><a id="__codelineno-21-3" name="__codelineno-21-3" href="#__codelineno-21-3"></a><span class="cm">     * This is an optional DexGuard RASP callback method.</span>
</span><span id="__span-21-4"><a id="__codelineno-21-4" name="__codelineno-21-4" href="#__codelineno-21-4"></a><span class="cm">     * The callback method should match one of the supported callback signatures.</span>
</span><span id="__span-21-5"><a id="__codelineno-21-5" name="__codelineno-21-5" href="#__codelineno-21-5"></a><span class="cm">     * Refer to</span>
</span><span id="__span-21-6"><a id="__codelineno-21-6" name="__codelineno-21-6" href="#__codelineno-21-6"></a><span class="cm">     * &lt;a href=&quot;https://platform.guardsquare.com/manual/dexguard/stable/latest/rasp.html#supported-rasp-callback-signatures&quot;&gt;this section&lt;/a&gt;</span>
</span><span id="__span-21-7"><a id="__codelineno-21-7" name="__codelineno-21-7" href="#__codelineno-21-7"></a><span class="cm">     * of the manual for a complete list of supported signatures.</span>
</span><span id="__span-21-8"><a id="__codelineno-21-8" name="__codelineno-21-8" href="#__codelineno-21-8"></a><span class="cm">     *</span>
</span><span id="__span-21-9"><a id="__codelineno-21-9" name="__codelineno-21-9" href="#__codelineno-21-9"></a><span class="cm">     * &lt;p&gt;Any strings used in the callback will be automatically encrypted.</span>
</span><span id="__span-21-10"><a id="__codelineno-21-10" name="__codelineno-21-10" href="#__codelineno-21-10"></a><span class="cm">     *</span>
</span><span id="__span-21-11"><a id="__codelineno-21-11" name="__codelineno-21-11" href="#__codelineno-21-11"></a><span class="cm">     * @param debugInfo A long value containing encoded threat information.</span>
</span><span id="__span-21-12"><a id="__codelineno-21-12" name="__codelineno-21-12" href="#__codelineno-21-12"></a><span class="cm">     */</span>
</span><span id="__span-21-13"><a id="__codelineno-21-13" name="__codelineno-21-13" href="#__codelineno-21-13"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">myRaspCallback</span><span class="p">(</span><span class="kt">long</span><span class="w"> </span><span class="n">debugInfo</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-21-14"><a id="__codelineno-21-14" name="__codelineno-21-14" href="#__codelineno-21-14"></a><span class="w">        </span><span class="n">Log</span><span class="p">.</span><span class="na">i</span><span class="p">(</span><span class="s">&quot;HelloWorldActivity&quot;</span><span class="p">,</span>
</span><span id="__span-21-15"><a id="__codelineno-21-15" name="__codelineno-21-15" href="#__codelineno-21-15"></a><span class="w">              </span><span class="s">&quot;RASP threat detected. DebugInfo : &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">debugInfo</span><span class="p">);</span>
</span><span id="__span-21-16"><a id="__codelineno-21-16" name="__codelineno-21-16" href="#__codelineno-21-16"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-21-17"><a id="__codelineno-21-17" name="__codelineno-21-17" href="#__codelineno-21-17"></a><span class="p">}</span>
</span></code></pre></div>
</div>
</div>
</div>
<p>You do not have to use this method anywhere in your app.
Instead, add the following DexGuard configuration to set <code>myRaspCallback</code> as the RASP callback method
for your RASP check(s):</p>
<div class="language-dexguard highlight"><span class="filename">Example: use the callback for emulator checks</span><pre><span></span><code><span id="__span-22-1"><a id="__codelineno-22-1" name="__codelineno-22-1" href="#__codelineno-22-1"></a><span class="err">-</span><span class="kt">raspcallback</span> <span class="kt">emulator</span> <span class="kd">class </span><span class="nc">com.example.HelloWorldActivity </span><span class="p">{</span>
</span><span id="__span-22-2"><a id="__codelineno-22-2" name="__codelineno-22-2" href="#__codelineno-22-2"></a>    <span class="k">public</span> <span class="k">static</span> <span class="kt">void</span> <span class="nf">myRaspCallback</span><span class="p">(</span><span class="kt">long</span><span class="p">);</span>
</span><span id="__span-22-3"><a id="__codelineno-22-3" name="__codelineno-22-3" href="#__codelineno-22-3"></a><span class="p">}</span>
</span></code></pre></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Supported RASP Callback methods' signatures are available in <a href="#rasp_callback-signatures">this link</a>.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Ensure specified callbacks are valid.</p>
<p>In order to define a callback in your configuration, the callback class specification needs to match an existing callback method.
Do not use the sample callbacks as indicated above (e.g. <code>com.example.HelloWorldActivity</code>).
Ensure the package and class name, as well as the method name, access modifiers and signatures match the existing callback defined in your source code.</p>
</div>
<div class="admonition danger">
<p class="admonition-title">Danger</p>
<p>It is strongly discouraged to indicate to the end users which RASP check was triggered as it might help
malicious users identify and bypass the RASP checks injected into your application. </p>
</div>
<p>You can also configure the same callback for multiple RASP checks by providing a comma separated list
of the RASP checks, or all RASP checks by providing a * wildcard instead of <code>emulator</code> in the above example.</p>
<p><div class="language-dexguard highlight"><span class="filename">Example: use the callback for emulator & apptamper checks</span><pre><span></span><code><span id="__span-23-1"><a id="__codelineno-23-1" name="__codelineno-23-1" href="#__codelineno-23-1"></a><span class="err">-</span><span class="kt">raspcallback</span> <span class="kt">emulator</span><span class="p">,</span><span class="kt">apptamper</span> <span class="kd">class </span><span class="nc">com.example.HelloWorldActivity </span><span class="p">{</span>
</span><span id="__span-23-2"><a id="__codelineno-23-2" name="__codelineno-23-2" href="#__codelineno-23-2"></a>    <span class="k">public</span> <span class="k">static</span> <span class="kt">void</span> <span class="nf">myRaspCallback</span><span class="p">(</span><span class="kt">long</span><span class="p">);</span>
</span><span id="__span-23-3"><a id="__codelineno-23-3" name="__codelineno-23-3" href="#__codelineno-23-3"></a><span class="p">}</span>
</span></code></pre></div>
<div class="language-dexguard highlight"><span class="filename">Example: use the callback for all rasp checks</span><pre><span></span><code><span id="__span-24-1"><a id="__codelineno-24-1" name="__codelineno-24-1" href="#__codelineno-24-1"></a><span class="err">-</span><span class="kt">raspcallback</span> <span class="kt">*</span> <span class="kd">class </span><span class="nc">com.example.HelloWorldActivity </span><span class="p">{</span>
</span><span id="__span-24-2"><a id="__codelineno-24-2" name="__codelineno-24-2" href="#__codelineno-24-2"></a>    <span class="k">public</span> <span class="k">static</span> <span class="kt">void</span> <span class="nf">myRaspCallback</span><span class="p">(</span><span class="kt">long</span><span class="p">);</span>
</span><span id="__span-24-3"><a id="__codelineno-24-3" name="__codelineno-24-3" href="#__codelineno-24-3"></a><span class="p">}</span>
</span></code></pre></div></p>
<div class="admonition tip">
<p class="admonition-title">Use multiple callbacks, i.e. a different callback for each RASP check.</p>
</div>
<h4 id="visual-feedback">Providing Visual Feedback<a class="headerlink" href="#visual-feedback" title="Permanent link">&para;</a></h4>
<p>DexGuard also supports callback methods that accept a Context object, which can be leveraged to provide visual 
feedback to the end users when a RASP check is triggered. This can be achieved by updating the <code>-raspcallback</code> 
and implementing the callback methods that resemble the template below:</p>
<div class="language-dexguard highlight"><pre><span></span><code><span id="__span-25-1"><a id="__codelineno-25-1" name="__codelineno-25-1" href="#__codelineno-25-1"></a><span class="err">-</span><span class="kt">raspcallback</span> <span class="kt">emulator</span> <span class="kd">class </span><span class="nc">com.example.HelloWorldActivity </span><span class="p">{</span>
</span><span id="__span-25-2"><a id="__codelineno-25-2" name="__codelineno-25-2" href="#__codelineno-25-2"></a>    <span class="k">public</span> <span class="k">static</span> <span class="kt">void</span> <span class="nf">myEmulatorCallback</span><span class="p">(</span><span class="kt">android.content.Context</span><span class="p">,</span> <span class="kt">long</span><span class="p">);</span>
</span><span id="__span-25-3"><a id="__codelineno-25-3" name="__codelineno-25-3" href="#__codelineno-25-3"></a><span class="p">}</span>
</span></code></pre></div>
<h5 id="limitations-and-guidelines">Limitations and guidelines<a class="headerlink" href="#limitations-and-guidelines" title="Permanent link">&para;</a></h5>
<p>RASP checks may trigger in parts of your applications where access to UI is either unavailable or limited. Some basic guidelines should
be followed to avoid unexpected behavior:</p>
<ol>
<li>
<p><strong>Add a null check on the Context parameter</strong></p>
<p>If the RASP check triggers before a context is available, then the context passed to the callback will be null.
Therefore, a necessary null check on this object should be performed before accessing them.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="8:2"><input checked="checked" id="kotlin_1" name="__tabbed_8" type="radio" /><input id="java_1" name="__tabbed_8" type="radio" /><div class="tabbed-labels"><label for="kotlin_1">Kotlin</label><label for="java_1">Java</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="language-Kotlin highlight"><pre><span></span><code><span id="__span-26-1"><a id="__codelineno-26-1" name="__codelineno-26-1" href="#__codelineno-26-1"></a><span class="kd">class</span><span class="w"> </span><span class="nc">HelloWorldActivity</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">Activity</span><span class="p">()</span>
</span><span id="__span-26-2"><a id="__codelineno-26-2" name="__codelineno-26-2" href="#__codelineno-26-2"></a><span class="p">{</span>
</span><span id="__span-26-3"><a id="__codelineno-26-3" name="__codelineno-26-3" href="#__codelineno-26-3"></a><span class="w">    </span><span class="kd">companion</span><span class="w"> </span><span class="kd">object</span>
</span><span id="__span-26-4"><a id="__codelineno-26-4" name="__codelineno-26-4" href="#__codelineno-26-4"></a><span class="w">    </span><span class="err">{</span>
</span><span id="__span-26-5"><a id="__codelineno-26-5" name="__codelineno-26-5" href="#__codelineno-26-5"></a><span class="w">        </span><span class="cm">/**</span>
</span><span id="__span-26-6"><a id="__codelineno-26-6" name="__codelineno-26-6" href="#__codelineno-26-6"></a><span class="cm">         * This is an optional DexGuard RASP callback method.</span>
</span><span id="__span-26-7"><a id="__codelineno-26-7" name="__codelineno-26-7" href="#__codelineno-26-7"></a><span class="cm">         * The callback method should match one of the supported callback signatures.</span>
</span><span id="__span-26-8"><a id="__codelineno-26-8" name="__codelineno-26-8" href="#__codelineno-26-8"></a><span class="cm">         * Refer to</span>
</span><span id="__span-26-9"><a id="__codelineno-26-9" name="__codelineno-26-9" href="#__codelineno-26-9"></a><span class="cm">         * &lt;a href=&quot;https://platform.guardsquare.com/manual/dexguard/stable/latest/rasp.html#supported-rasp-callback-signatures&quot;&gt;this section&lt;/a&gt;</span>
</span><span id="__span-26-10"><a id="__codelineno-26-10" name="__codelineno-26-10" href="#__codelineno-26-10"></a><span class="cm">         * of the manual for a complete list of supported signatures.</span>
</span><span id="__span-26-11"><a id="__codelineno-26-11" name="__codelineno-26-11" href="#__codelineno-26-11"></a><span class="cm">         *</span>
</span><span id="__span-26-12"><a id="__codelineno-26-12" name="__codelineno-26-12" href="#__codelineno-26-12"></a><span class="cm">         * &lt;p&gt;Any strings used in the callback will be automatically encrypted.</span>
</span><span id="__span-26-13"><a id="__codelineno-26-13" name="__codelineno-26-13" href="#__codelineno-26-13"></a><span class="cm">         *</span>
</span><span id="__span-26-14"><a id="__codelineno-26-14" name="__codelineno-26-14" href="#__codelineno-26-14"></a><span class="cm">         * @param context   Application context used for visual feedback.</span>
</span><span id="__span-26-15"><a id="__codelineno-26-15" name="__codelineno-26-15" href="#__codelineno-26-15"></a><span class="cm">         * @param debugInfo A long value containing encoded threat information.</span>
</span><span id="__span-26-16"><a id="__codelineno-26-16" name="__codelineno-26-16" href="#__codelineno-26-16"></a><span class="cm">         */</span>
</span><span id="__span-26-17"><a id="__codelineno-26-17" name="__codelineno-26-17" href="#__codelineno-26-17"></a><span class="w">        </span><span class="nd">@JvmStatic</span>
</span><span id="__span-26-18"><a id="__codelineno-26-18" name="__codelineno-26-18" href="#__codelineno-26-18"></a><span class="w">        </span><span class="kd">fun</span><span class="w"> </span><span class="nf">myEmulatorCallback</span><span class="p">(</span><span class="n">context</span><span class="p">:</span><span class="w"> </span><span class="n">Context?,</span><span class="w"> </span><span class="n">debugInfo</span><span class="p">:</span><span class="w"> </span><span class="kt">Long</span><span class="p">)</span>
</span><span id="__span-26-19"><a id="__codelineno-26-19" name="__codelineno-26-19" href="#__codelineno-26-19"></a><span class="w">        </span><span class="p">{</span>
</span><span id="__span-26-20"><a id="__codelineno-26-20" name="__codelineno-26-20" href="#__codelineno-26-20"></a><span class="w">            </span><span class="c1">// Null check the `context` object.</span>
</span><span id="__span-26-21"><a id="__codelineno-26-21" name="__codelineno-26-21" href="#__codelineno-26-21"></a><span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">context</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-26-22"><a id="__codelineno-26-22" name="__codelineno-26-22" href="#__codelineno-26-22"></a><span class="w">                </span><span class="c1">// Alternative call back implementation when the `context` is null</span>
</span><span id="__span-26-23"><a id="__codelineno-26-23" name="__codelineno-26-23" href="#__codelineno-26-23"></a><span class="w">                </span><span class="c1">// ...</span>
</span><span id="__span-26-24"><a id="__codelineno-26-24" name="__codelineno-26-24" href="#__codelineno-26-24"></a><span class="w">                </span><span class="k">return</span>
</span><span id="__span-26-25"><a id="__codelineno-26-25" name="__codelineno-26-25" href="#__codelineno-26-25"></a><span class="w">            </span><span class="p">}</span>
</span><span id="__span-26-26"><a id="__codelineno-26-26" name="__codelineno-26-26" href="#__codelineno-26-26"></a>
</span><span id="__span-26-27"><a id="__codelineno-26-27" name="__codelineno-26-27" href="#__codelineno-26-27"></a><span class="w">            </span><span class="c1">// Optionally provide visual feedback using the provided context.</span>
</span><span id="__span-26-28"><a id="__codelineno-26-28" name="__codelineno-26-28" href="#__codelineno-26-28"></a><span class="w">            </span><span class="c1">// ...</span>
</span><span id="__span-26-29"><a id="__codelineno-26-29" name="__codelineno-26-29" href="#__codelineno-26-29"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-26-30"><a id="__codelineno-26-30" name="__codelineno-26-30" href="#__codelineno-26-30"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-26-31"><a id="__codelineno-26-31" name="__codelineno-26-31" href="#__codelineno-26-31"></a><span class="p">}</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="language-Java highlight"><pre><span></span><code><span id="__span-27-1"><a id="__codelineno-27-1" name="__codelineno-27-1" href="#__codelineno-27-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">HelloWorldActivity</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">Activity</span>
</span><span id="__span-27-2"><a id="__codelineno-27-2" name="__codelineno-27-2" href="#__codelineno-27-2"></a><span class="p">{</span>
</span><span id="__span-27-3"><a id="__codelineno-27-3" name="__codelineno-27-3" href="#__codelineno-27-3"></a><span class="w">    </span><span class="cm">/**</span>
</span><span id="__span-27-4"><a id="__codelineno-27-4" name="__codelineno-27-4" href="#__codelineno-27-4"></a><span class="cm">      * This is an optional DexGuard RASP callback method.</span>
</span><span id="__span-27-5"><a id="__codelineno-27-5" name="__codelineno-27-5" href="#__codelineno-27-5"></a><span class="cm">      * The callback method should match one of the supported callback signatures.</span>
</span><span id="__span-27-6"><a id="__codelineno-27-6" name="__codelineno-27-6" href="#__codelineno-27-6"></a><span class="cm">      * Refer to</span>
</span><span id="__span-27-7"><a id="__codelineno-27-7" name="__codelineno-27-7" href="#__codelineno-27-7"></a><span class="cm">      * &lt;a href=&quot;https://platform.guardsquare.com/manual/dexguard/stable/latest/rasp.html#supported-rasp-callback-signatures&quot;&gt;this section&lt;/a&gt;</span>
</span><span id="__span-27-8"><a id="__codelineno-27-8" name="__codelineno-27-8" href="#__codelineno-27-8"></a><span class="cm">      * of the manual for a complete list of supported signatures.</span>
</span><span id="__span-27-9"><a id="__codelineno-27-9" name="__codelineno-27-9" href="#__codelineno-27-9"></a><span class="cm">      *</span>
</span><span id="__span-27-10"><a id="__codelineno-27-10" name="__codelineno-27-10" href="#__codelineno-27-10"></a><span class="cm">      * &lt;p&gt;Any strings used in the callback will be automatically encrypted.</span>
</span><span id="__span-27-11"><a id="__codelineno-27-11" name="__codelineno-27-11" href="#__codelineno-27-11"></a><span class="cm">     *</span>
</span><span id="__span-27-12"><a id="__codelineno-27-12" name="__codelineno-27-12" href="#__codelineno-27-12"></a><span class="cm">     * @param context   Application context used for visual feedback.</span>
</span><span id="__span-27-13"><a id="__codelineno-27-13" name="__codelineno-27-13" href="#__codelineno-27-13"></a><span class="cm">     * @param debugInfo A long value containing encoded threat information.</span>
</span><span id="__span-27-14"><a id="__codelineno-27-14" name="__codelineno-27-14" href="#__codelineno-27-14"></a><span class="cm">     */</span>
</span><span id="__span-27-15"><a id="__codelineno-27-15" name="__codelineno-27-15" href="#__codelineno-27-15"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">myEmulatorCallback</span><span class="p">(</span><span class="n">Context</span><span class="w"> </span><span class="n">context</span><span class="p">,</span><span class="w"> </span><span class="kt">long</span><span class="w"> </span><span class="n">debugInfo</span><span class="p">)</span>
</span><span id="__span-27-16"><a id="__codelineno-27-16" name="__codelineno-27-16" href="#__codelineno-27-16"></a><span class="w">    </span><span class="p">{</span>
</span><span id="__span-27-17"><a id="__codelineno-27-17" name="__codelineno-27-17" href="#__codelineno-27-17"></a><span class="w">        </span><span class="c1">// Null check the `context` object.</span>
</span><span id="__span-27-18"><a id="__codelineno-27-18" name="__codelineno-27-18" href="#__codelineno-27-18"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">context</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-27-19"><a id="__codelineno-27-19" name="__codelineno-27-19" href="#__codelineno-27-19"></a><span class="w">            </span><span class="c1">// Alternative call back implementation when the `context` is null</span>
</span><span id="__span-27-20"><a id="__codelineno-27-20" name="__codelineno-27-20" href="#__codelineno-27-20"></a><span class="w">            </span><span class="c1">// ...</span>
</span><span id="__span-27-21"><a id="__codelineno-27-21" name="__codelineno-27-21" href="#__codelineno-27-21"></a><span class="w">            </span><span class="k">return</span><span class="p">;</span>
</span><span id="__span-27-22"><a id="__codelineno-27-22" name="__codelineno-27-22" href="#__codelineno-27-22"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-27-23"><a id="__codelineno-27-23" name="__codelineno-27-23" href="#__codelineno-27-23"></a>
</span><span id="__span-27-24"><a id="__codelineno-27-24" name="__codelineno-27-24" href="#__codelineno-27-24"></a><span class="w">        </span><span class="c1">// Optionally provide visual feedback using the provided context.</span>
</span><span id="__span-27-25"><a id="__codelineno-27-25" name="__codelineno-27-25" href="#__codelineno-27-25"></a><span class="w">        </span><span class="c1">// ...</span>
</span><span id="__span-27-26"><a id="__codelineno-27-26" name="__codelineno-27-26" href="#__codelineno-27-26"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-27-27"><a id="__codelineno-27-27" name="__codelineno-27-27" href="#__codelineno-27-27"></a><span class="p">}</span>
</span></code></pre></div>
</div>
</div>
</div>
</li>
<li>
<p><strong>Do not rely on activity context</strong></p>
<p>A RASP check can trigger when only an <code>Application</code> context is available.
You should therefore only use UI elements that can be shown with an <code>Application</code> context (see the <a href="#rasp-callbacks-with-context-examples">examples section</a>).</p>
<p>Avoid UI elements that require an <code>Activity</code> context (e.g. <a href="https://developer.android.com/reference/android/app/Dialog">Dialog</a>).</p>
</li>
</ol>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Supported RASP Callback methods' signatures are available in <a href="#rasp_callback-signatures">this link</a>.</p>
</div>
<div class="admonition danger">
<p class="admonition-title">Danger</p>
<p>It is important to not indicate which RASP check is triggered in the visual feedback as such practices 
would enable malicious users to identify and patch the triggered RASP check.  </p>
</div>
<h4 id="rasp-callbacks-with-context-examples">RASP callbacks with context examples<a class="headerlink" href="#rasp-callbacks-with-context-examples" title="Permanent link">&para;</a></h4>
<p>Below are examples of how a RASP callback with context can be leveraged to provide visual feedback to the end users
upon the trigger of a RASP check: </p>
<div class="tabbed-set tabbed-alternate" data-tabs="9:4"><input checked="checked" id="showing-a-toast-message" name="__tabbed_9" type="radio" /><input id="posting-a-notification" name="__tabbed_9" type="radio" /><input id="redirecting-to-a-web-page" name="__tabbed_9" type="radio" /><input id="redirecting-to-a-local-web-page" name="__tabbed_9" type="radio" /><div class="tabbed-labels"><label for="showing-a-toast-message">Showing a toast message</label><label for="posting-a-notification">Posting a notification</label><label for="redirecting-to-a-web-page">Redirecting to a web page</label><label for="redirecting-to-a-local-web-page">Redirecting to a local web page</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>With this example, a Toast message indicating that the app is not supported on the user device is shown 
when the app is executed on an emulator.</p>
<div class="language-dexguard highlight"><pre><span></span><code><span id="__span-28-1"><a id="__codelineno-28-1" name="__codelineno-28-1" href="#__codelineno-28-1"></a><span class="err">-</span><span class="kt">raspchecks</span> <span class="kt">emulator</span>
</span><span id="__span-28-2"><a id="__codelineno-28-2" name="__codelineno-28-2" href="#__codelineno-28-2"></a><span class="err">-</span><span class="kt">raspcallback</span> <span class="kt">emulator</span> <span class="kd">class </span><span class="nc">com.example.HelloWorldActivity </span><span class="p">{</span>
</span><span id="__span-28-3"><a id="__codelineno-28-3" name="__codelineno-28-3" href="#__codelineno-28-3"></a>    <span class="k">public</span> <span class="k">static</span> <span class="kt">void</span> <span class="nf">myEmulatorCallback</span><span class="p">(</span><span class="kt">android.content.Context</span><span class="p">,</span> <span class="kt">long</span><span class="p">);</span>
</span><span id="__span-28-4"><a id="__codelineno-28-4" name="__codelineno-28-4" href="#__codelineno-28-4"></a><span class="p">}</span>
</span></code></pre></div>
<div class="tabbed-set tabbed-alternate" data-tabs="10:2"><input checked="checked" id="kotlin_2" name="__tabbed_10" type="radio" /><input id="java_2" name="__tabbed_10" type="radio" /><div class="tabbed-labels"><label for="kotlin_2">Kotlin</label><label for="java_2">Java</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="language-Kotlin highlight"><pre><span></span><code><span id="__span-29-1"><a id="__codelineno-29-1" name="__codelineno-29-1" href="#__codelineno-29-1"></a><span class="nd">@JvmStatic</span>
</span><span id="__span-29-2"><a id="__codelineno-29-2" name="__codelineno-29-2" href="#__codelineno-29-2"></a><span class="kd">fun</span><span class="w"> </span><span class="nf">myEmulatorCallback</span><span class="p">(</span><span class="n">context</span><span class="p">:</span><span class="w"> </span><span class="n">Context?,</span><span class="w"> </span><span class="n">debugInfo</span><span class="p">:</span><span class="w"> </span><span class="kt">Long</span><span class="p">)</span>
</span><span id="__span-29-3"><a id="__codelineno-29-3" name="__codelineno-29-3" href="#__codelineno-29-3"></a><span class="p">{</span>
</span><span id="__span-29-4"><a id="__codelineno-29-4" name="__codelineno-29-4" href="#__codelineno-29-4"></a><span class="w">    </span><span class="c1">// Null check the `context` object to avoid NullPointerExceptions!</span>
</span><span id="__span-29-5"><a id="__codelineno-29-5" name="__codelineno-29-5" href="#__codelineno-29-5"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">context</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-29-6"><a id="__codelineno-29-6" name="__codelineno-29-6" href="#__codelineno-29-6"></a><span class="w">        </span><span class="n">Log</span><span class="p">.</span><span class="na">e</span><span class="p">(</span><span class="s">&quot;HelloWorldActivity&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Context is null, no visual feedback possible&quot;</span><span class="p">)</span>
</span><span id="__span-29-7"><a id="__codelineno-29-7" name="__codelineno-29-7" href="#__codelineno-29-7"></a><span class="w">        </span><span class="k">return</span>
</span><span id="__span-29-8"><a id="__codelineno-29-8" name="__codelineno-29-8" href="#__codelineno-29-8"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-29-9"><a id="__codelineno-29-9" name="__codelineno-29-9" href="#__codelineno-29-9"></a>
</span><span id="__span-29-10"><a id="__codelineno-29-10" name="__codelineno-29-10" href="#__codelineno-29-10"></a><span class="w">    </span><span class="c1">// Optionally provide visual feedback using the provided context.</span>
</span><span id="__span-29-11"><a id="__codelineno-29-11" name="__codelineno-29-11" href="#__codelineno-29-11"></a><span class="w">    </span><span class="n">Toast</span><span class="p">.</span><span class="na">makeText</span><span class="p">(</span><span class="n">context</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;This device is not supported by our application.&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">Toast</span><span class="p">.</span><span class="na">LENGTH_LONG</span><span class="p">).</span><span class="na">show</span><span class="p">()</span>
</span><span id="__span-29-12"><a id="__codelineno-29-12" name="__codelineno-29-12" href="#__codelineno-29-12"></a><span class="p">}</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="language-Java highlight"><pre><span></span><code><span id="__span-30-1"><a id="__codelineno-30-1" name="__codelineno-30-1" href="#__codelineno-30-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">myEmulatorCallback</span><span class="p">(</span><span class="n">Context</span><span class="w"> </span><span class="n">context</span><span class="p">,</span><span class="w"> </span><span class="kt">long</span><span class="w"> </span><span class="n">debugInfo</span><span class="p">)</span>
</span><span id="__span-30-2"><a id="__codelineno-30-2" name="__codelineno-30-2" href="#__codelineno-30-2"></a><span class="p">{</span>
</span><span id="__span-30-3"><a id="__codelineno-30-3" name="__codelineno-30-3" href="#__codelineno-30-3"></a><span class="w">    </span><span class="c1">// Null check the `context` object to avoid NullPointerExceptions!</span>
</span><span id="__span-30-4"><a id="__codelineno-30-4" name="__codelineno-30-4" href="#__codelineno-30-4"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">context</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-30-5"><a id="__codelineno-30-5" name="__codelineno-30-5" href="#__codelineno-30-5"></a><span class="w">      </span><span class="n">Log</span><span class="p">.</span><span class="na">e</span><span class="p">(</span><span class="s">&quot;HelloWorldActivity&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Context is null, no visual feedback possible&quot;</span><span class="p">);</span>
</span><span id="__span-30-6"><a id="__codelineno-30-6" name="__codelineno-30-6" href="#__codelineno-30-6"></a><span class="w">      </span><span class="k">return</span><span class="p">;</span>
</span><span id="__span-30-7"><a id="__codelineno-30-7" name="__codelineno-30-7" href="#__codelineno-30-7"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-30-8"><a id="__codelineno-30-8" name="__codelineno-30-8" href="#__codelineno-30-8"></a>
</span><span id="__span-30-9"><a id="__codelineno-30-9" name="__codelineno-30-9" href="#__codelineno-30-9"></a><span class="w">    </span><span class="c1">// Optionally provide visual feedback using the provided context.</span>
</span><span id="__span-30-10"><a id="__codelineno-30-10" name="__codelineno-30-10" href="#__codelineno-30-10"></a><span class="w">    </span><span class="n">Toast</span><span class="p">.</span><span class="na">makeText</span><span class="p">(</span><span class="n">context</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;This device is not supported by our application.&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">Toast</span><span class="p">.</span><span class="na">LENGTH_LONG</span><span class="p">).</span><span class="na">show</span><span class="p">();</span>
</span><span id="__span-30-11"><a id="__codelineno-30-11" name="__codelineno-30-11" href="#__codelineno-30-11"></a><span class="p">}</span>
</span></code></pre></div>
</div>
</div>
</div>
<div class="admonition note">
<p class="admonition-title">Known limitations</p>
<p>On API 29 (Quince Tart) or below, toast messages might not show up when used in the RASP callback with the default RASP crash reaction.</p>
</div>
</div>
<div class="tabbed-block">
<p>With this example, a Notification message indicating that the app is not supported on the user device will be sent 
when the app is executed on an emulator.</p>
<div class="language-dexguard highlight"><pre><span></span><code><span id="__span-31-1"><a id="__codelineno-31-1" name="__codelineno-31-1" href="#__codelineno-31-1"></a><span class="err">-</span><span class="kt">raspchecks</span> <span class="kt">emulator</span>
</span><span id="__span-31-2"><a id="__codelineno-31-2" name="__codelineno-31-2" href="#__codelineno-31-2"></a><span class="err">-</span><span class="kt">raspcallback</span> <span class="kt">emulator</span> <span class="kd">class </span><span class="nc">com.example.HelloWorldActivity </span><span class="p">{</span>
</span><span id="__span-31-3"><a id="__codelineno-31-3" name="__codelineno-31-3" href="#__codelineno-31-3"></a>    <span class="k">public</span> <span class="k">static</span> <span class="kt">void</span> <span class="nf">myEmulatorCallback</span><span class="p">(</span><span class="kt">android.content.Context</span><span class="p">,</span> <span class="kt">long</span><span class="p">);</span>
</span><span id="__span-31-4"><a id="__codelineno-31-4" name="__codelineno-31-4" href="#__codelineno-31-4"></a><span class="p">}</span>
</span></code></pre></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>On API 33 (Tiramisu) and above, the <code>POST_NOTIFICATIONS</code> permission is required
to post notifications. Make sure to request this permission upfront.</p>
</div>
<div class="tabbed-set tabbed-alternate" data-tabs="11:2"><input checked="checked" id="kotlin_3" name="__tabbed_11" type="radio" /><input id="java_3" name="__tabbed_11" type="radio" /><div class="tabbed-labels"><label for="kotlin_3">Kotlin</label><label for="java_3">Java</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="language-Kotlin highlight"><pre><span></span><code><span id="__span-32-1"><a id="__codelineno-32-1" name="__codelineno-32-1" href="#__codelineno-32-1"></a><span class="nd">@JvmStatic</span>
</span><span id="__span-32-2"><a id="__codelineno-32-2" name="__codelineno-32-2" href="#__codelineno-32-2"></a><span class="kd">fun</span><span class="w"> </span><span class="nf">myEmulatorCallback</span><span class="p">(</span><span class="n">context</span><span class="p">:</span><span class="w"> </span><span class="n">Context?,</span><span class="w"> </span><span class="n">debugInfo</span><span class="p">:</span><span class="w"> </span><span class="kt">Long</span><span class="p">)</span>
</span><span id="__span-32-3"><a id="__codelineno-32-3" name="__codelineno-32-3" href="#__codelineno-32-3"></a><span class="p">{</span>
</span><span id="__span-32-4"><a id="__codelineno-32-4" name="__codelineno-32-4" href="#__codelineno-32-4"></a><span class="w">    </span><span class="c1">// Null check the `context` object to avoid NullPointerExceptions!</span>
</span><span id="__span-32-5"><a id="__codelineno-32-5" name="__codelineno-32-5" href="#__codelineno-32-5"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">context</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-32-6"><a id="__codelineno-32-6" name="__codelineno-32-6" href="#__codelineno-32-6"></a><span class="w">        </span><span class="n">Log</span><span class="p">.</span><span class="na">e</span><span class="p">(</span><span class="s">&quot;HelloWorldActivity&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Context is null, no visual feedback possible&quot;</span><span class="p">)</span>
</span><span id="__span-32-7"><a id="__codelineno-32-7" name="__codelineno-32-7" href="#__codelineno-32-7"></a><span class="w">        </span><span class="k">return</span>
</span><span id="__span-32-8"><a id="__codelineno-32-8" name="__codelineno-32-8" href="#__codelineno-32-8"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-32-9"><a id="__codelineno-32-9" name="__codelineno-32-9" href="#__codelineno-32-9"></a>
</span><span id="__span-32-10"><a id="__codelineno-32-10" name="__codelineno-32-10" href="#__codelineno-32-10"></a><span class="w">    </span><span class="c1">// Optionally provide visual feedback using the provided context.</span>
</span><span id="__span-32-11"><a id="__codelineno-32-11" name="__codelineno-32-11" href="#__codelineno-32-11"></a><span class="w">    </span><span class="c1">// API 33+ (Tiramisu) requires the `POST_NOTIFICATIONS` permission to be granted</span>
</span><span id="__span-32-12"><a id="__codelineno-32-12" name="__codelineno-32-12" href="#__codelineno-32-12"></a><span class="w">    </span><span class="c1">// in order to post notifications. Requesting this permission should happen outside</span>
</span><span id="__span-32-13"><a id="__codelineno-32-13" name="__codelineno-32-13" href="#__codelineno-32-13"></a><span class="w">    </span><span class="c1">// of the callback so we assume that it has already been granted here.</span>
</span><span id="__span-32-14"><a id="__codelineno-32-14" name="__codelineno-32-14" href="#__codelineno-32-14"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">Build</span><span class="p">.</span><span class="na">VERSION</span><span class="p">.</span><span class="na">SDK_INT</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="n">Build</span><span class="p">.</span><span class="na">VERSION_CODES</span><span class="p">.</span><span class="na">TIRAMISU</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-32-15"><a id="__codelineno-32-15" name="__codelineno-32-15" href="#__codelineno-32-15"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">ActivityCompat</span><span class="p">.</span><span class="na">checkSelfPermission</span><span class="p">(</span><span class="n">context</span><span class="p">,</span><span class="w"> </span><span class="n">android</span><span class="p">.</span><span class="na">Manifest</span><span class="p">.</span><span class="na">permission</span><span class="p">.</span><span class="na">POST_NOTIFICATIONS</span><span class="p">)</span>
</span><span id="__span-32-16"><a id="__codelineno-32-16" name="__codelineno-32-16" href="#__codelineno-32-16"></a><span class="w">            </span><span class="o">!=</span><span class="w"> </span><span class="n">PackageManager</span><span class="p">.</span><span class="na">PERMISSION_GRANTED</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-32-17"><a id="__codelineno-32-17" name="__codelineno-32-17" href="#__codelineno-32-17"></a><span class="w">            </span><span class="n">Toast</span><span class="p">.</span><span class="na">makeText</span><span class="p">(</span><span class="n">context</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;No permission to post notifications.&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">Toast</span><span class="p">.</span><span class="na">LENGTH_LONG</span><span class="p">).</span><span class="na">show</span><span class="p">()</span>
</span><span id="__span-32-18"><a id="__codelineno-32-18" name="__codelineno-32-18" href="#__codelineno-32-18"></a><span class="w">            </span><span class="k">return</span>
</span><span id="__span-32-19"><a id="__codelineno-32-19" name="__codelineno-32-19" href="#__codelineno-32-19"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-32-20"><a id="__codelineno-32-20" name="__codelineno-32-20" href="#__codelineno-32-20"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-32-21"><a id="__codelineno-32-21" name="__codelineno-32-21" href="#__codelineno-32-21"></a>
</span><span id="__span-32-22"><a id="__codelineno-32-22" name="__codelineno-32-22" href="#__codelineno-32-22"></a><span class="w">    </span><span class="c1">// API 26+ (Oreo) requires a NotificationChannel to manage notification settings.</span>
</span><span id="__span-32-23"><a id="__codelineno-32-23" name="__codelineno-32-23" href="#__codelineno-32-23"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">Build</span><span class="p">.</span><span class="na">VERSION</span><span class="p">.</span><span class="na">SDK_INT</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="n">Build</span><span class="p">.</span><span class="na">VERSION_CODES</span><span class="p">.</span><span class="na">O</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-32-24"><a id="__codelineno-32-24" name="__codelineno-32-24" href="#__codelineno-32-24"></a><span class="w">        </span><span class="kd">val</span><span class="w"> </span><span class="nv">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Notification channel&quot;</span>
</span><span id="__span-32-25"><a id="__codelineno-32-25" name="__codelineno-32-25" href="#__codelineno-32-25"></a><span class="w">        </span><span class="kd">val</span><span class="w"> </span><span class="nv">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Notification channel description&quot;</span>
</span><span id="__span-32-26"><a id="__codelineno-32-26" name="__codelineno-32-26" href="#__codelineno-32-26"></a><span class="w">        </span><span class="kd">val</span><span class="w"> </span><span class="nv">importance</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">NotificationManager</span><span class="p">.</span><span class="na">IMPORTANCE_DEFAULT</span>
</span><span id="__span-32-27"><a id="__codelineno-32-27" name="__codelineno-32-27" href="#__codelineno-32-27"></a><span class="w">        </span><span class="kd">val</span><span class="w"> </span><span class="nv">channel</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">NotificationChannel</span><span class="p">(</span><span class="s">&quot;channel_id&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="n">importance</span><span class="p">)</span>
</span><span id="__span-32-28"><a id="__codelineno-32-28" name="__codelineno-32-28" href="#__codelineno-32-28"></a><span class="w">        </span><span class="n">channel</span><span class="p">.</span><span class="na">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">description</span>
</span><span id="__span-32-29"><a id="__codelineno-32-29" name="__codelineno-32-29" href="#__codelineno-32-29"></a><span class="w">        </span><span class="c1">// Register the channel with the system. You can&#39;t change the importance</span>
</span><span id="__span-32-30"><a id="__codelineno-32-30" name="__codelineno-32-30" href="#__codelineno-32-30"></a><span class="w">        </span><span class="c1">// or other notification behaviors after this.</span>
</span><span id="__span-32-31"><a id="__codelineno-32-31" name="__codelineno-32-31" href="#__codelineno-32-31"></a><span class="w">        </span><span class="kd">val</span><span class="w"> </span><span class="nv">notificationManager</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">context</span><span class="p">.</span><span class="na">getSystemService</span><span class="p">(</span><span class="n">NotificationManager</span><span class="o">::</span><span class="n">class</span><span class="p">.</span><span class="na">java</span><span class="p">)</span>
</span><span id="__span-32-32"><a id="__codelineno-32-32" name="__codelineno-32-32" href="#__codelineno-32-32"></a><span class="w">        </span><span class="n">notificationManager</span><span class="p">.</span><span class="na">createNotificationChannel</span><span class="p">(</span><span class="n">channel</span><span class="p">)</span>
</span><span id="__span-32-33"><a id="__codelineno-32-33" name="__codelineno-32-33" href="#__codelineno-32-33"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-32-34"><a id="__codelineno-32-34" name="__codelineno-32-34" href="#__codelineno-32-34"></a>
</span><span id="__span-32-35"><a id="__codelineno-32-35" name="__codelineno-32-35" href="#__codelineno-32-35"></a><span class="w">    </span><span class="kd">val</span><span class="w"> </span><span class="nv">builder</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">NotificationCompat</span><span class="p">.</span><span class="na">Builder</span><span class="p">(</span><span class="n">context</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;channel_id&quot;</span><span class="p">)</span>
</span><span id="__span-32-36"><a id="__codelineno-32-36" name="__codelineno-32-36" href="#__codelineno-32-36"></a><span class="w">        </span><span class="p">.</span><span class="na">setSmallIcon</span><span class="p">(</span><span class="n">R</span><span class="p">.</span><span class="na">drawable</span><span class="p">.</span><span class="na">ic_launcher</span><span class="p">)</span>
</span><span id="__span-32-37"><a id="__codelineno-32-37" name="__codelineno-32-37" href="#__codelineno-32-37"></a><span class="w">        </span><span class="p">.</span><span class="na">setContentTitle</span><span class="p">(</span><span class="s">&quot;Unsupported device!&quot;</span><span class="p">)</span>
</span><span id="__span-32-38"><a id="__codelineno-32-38" name="__codelineno-32-38" href="#__codelineno-32-38"></a><span class="w">        </span><span class="p">.</span><span class="na">setContentText</span><span class="p">(</span><span class="s">&quot;This device is not supported by our application.&quot;</span><span class="p">)</span>
</span><span id="__span-32-39"><a id="__codelineno-32-39" name="__codelineno-32-39" href="#__codelineno-32-39"></a><span class="w">        </span><span class="p">.</span><span class="na">setPriority</span><span class="p">(</span><span class="n">NotificationCompat</span><span class="p">.</span><span class="na">PRIORITY_DEFAULT</span><span class="p">)</span>
</span><span id="__span-32-40"><a id="__codelineno-32-40" name="__codelineno-32-40" href="#__codelineno-32-40"></a>
</span><span id="__span-32-41"><a id="__codelineno-32-41" name="__codelineno-32-41" href="#__codelineno-32-41"></a><span class="w">    </span><span class="kd">val</span><span class="w"> </span><span class="nv">notificationManagerCompat</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">NotificationManagerCompat</span><span class="p">.</span><span class="na">from</span><span class="p">(</span><span class="n">context</span><span class="p">)</span>
</span><span id="__span-32-42"><a id="__codelineno-32-42" name="__codelineno-32-42" href="#__codelineno-32-42"></a><span class="w">    </span><span class="n">notificationManagerCompat</span><span class="p">.</span><span class="na">notify</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="n">builder</span><span class="p">.</span><span class="na">build</span><span class="p">())</span>
</span><span id="__span-32-43"><a id="__codelineno-32-43" name="__codelineno-32-43" href="#__codelineno-32-43"></a><span class="p">}</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="language-Java highlight"><pre><span></span><code><span id="__span-33-1"><a id="__codelineno-33-1" name="__codelineno-33-1" href="#__codelineno-33-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">myEmulatorCallback</span><span class="p">(</span><span class="n">Context</span><span class="w"> </span><span class="n">context</span><span class="p">,</span><span class="w"> </span><span class="kt">long</span><span class="w"> </span><span class="n">debugInfo</span><span class="p">)</span>
</span><span id="__span-33-2"><a id="__codelineno-33-2" name="__codelineno-33-2" href="#__codelineno-33-2"></a><span class="p">{</span>
</span><span id="__span-33-3"><a id="__codelineno-33-3" name="__codelineno-33-3" href="#__codelineno-33-3"></a><span class="w">    </span><span class="c1">// Null check the `context` object to avoid NullPointerExceptions!</span>
</span><span id="__span-33-4"><a id="__codelineno-33-4" name="__codelineno-33-4" href="#__codelineno-33-4"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">context</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-33-5"><a id="__codelineno-33-5" name="__codelineno-33-5" href="#__codelineno-33-5"></a><span class="w">      </span><span class="n">Log</span><span class="p">.</span><span class="na">e</span><span class="p">(</span><span class="s">&quot;HelloWorldActivity&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Context is null, no visual feedback possible&quot;</span><span class="p">);</span>
</span><span id="__span-33-6"><a id="__codelineno-33-6" name="__codelineno-33-6" href="#__codelineno-33-6"></a><span class="w">      </span><span class="k">return</span><span class="p">;</span>
</span><span id="__span-33-7"><a id="__codelineno-33-7" name="__codelineno-33-7" href="#__codelineno-33-7"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-33-8"><a id="__codelineno-33-8" name="__codelineno-33-8" href="#__codelineno-33-8"></a>
</span><span id="__span-33-9"><a id="__codelineno-33-9" name="__codelineno-33-9" href="#__codelineno-33-9"></a><span class="w">    </span><span class="c1">// Optionally provide visual feedback using the provided context.</span>
</span><span id="__span-33-10"><a id="__codelineno-33-10" name="__codelineno-33-10" href="#__codelineno-33-10"></a><span class="w">    </span><span class="c1">// API 33+ (Tiramisu) requires the `POST_NOTIFICATIONS` permission to be granted</span>
</span><span id="__span-33-11"><a id="__codelineno-33-11" name="__codelineno-33-11" href="#__codelineno-33-11"></a><span class="w">    </span><span class="c1">// in order to post notifications. Requesting this permission should happen outside</span>
</span><span id="__span-33-12"><a id="__codelineno-33-12" name="__codelineno-33-12" href="#__codelineno-33-12"></a><span class="w">    </span><span class="c1">// of the callback so we assume that it has already been granted here.</span>
</span><span id="__span-33-13"><a id="__codelineno-33-13" name="__codelineno-33-13" href="#__codelineno-33-13"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">Build</span><span class="p">.</span><span class="na">VERSION</span><span class="p">.</span><span class="na">SDK_INT</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="n">Build</span><span class="p">.</span><span class="na">VERSION_CODES</span><span class="p">.</span><span class="na">TIRAMISU</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-33-14"><a id="__codelineno-33-14" name="__codelineno-33-14" href="#__codelineno-33-14"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">ActivityCompat</span><span class="p">.</span><span class="na">checkSelfPermission</span><span class="p">(</span><span class="n">context</span><span class="p">,</span><span class="w"> </span><span class="n">android</span><span class="p">.</span><span class="na">Manifest</span><span class="p">.</span><span class="na">permission</span><span class="p">.</span><span class="na">POST_NOTIFICATIONS</span><span class="p">)</span>
</span><span id="__span-33-15"><a id="__codelineno-33-15" name="__codelineno-33-15" href="#__codelineno-33-15"></a><span class="w">                </span><span class="o">!=</span><span class="w"> </span><span class="n">PackageManager</span><span class="p">.</span><span class="na">PERMISSION_GRANTED</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-33-16"><a id="__codelineno-33-16" name="__codelineno-33-16" href="#__codelineno-33-16"></a><span class="w">            </span><span class="n">Toast</span><span class="p">.</span><span class="na">makeText</span><span class="p">(</span><span class="n">context</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;No permission to post notifications.&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">Toast</span><span class="p">.</span><span class="na">LENGTH_LONG</span><span class="p">).</span><span class="na">show</span><span class="p">();</span>
</span><span id="__span-33-17"><a id="__codelineno-33-17" name="__codelineno-33-17" href="#__codelineno-33-17"></a><span class="w">            </span><span class="k">return</span><span class="p">;</span>
</span><span id="__span-33-18"><a id="__codelineno-33-18" name="__codelineno-33-18" href="#__codelineno-33-18"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-33-19"><a id="__codelineno-33-19" name="__codelineno-33-19" href="#__codelineno-33-19"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-33-20"><a id="__codelineno-33-20" name="__codelineno-33-20" href="#__codelineno-33-20"></a>
</span><span id="__span-33-21"><a id="__codelineno-33-21" name="__codelineno-33-21" href="#__codelineno-33-21"></a><span class="w">    </span><span class="c1">// API 26+ (Oreo) requires a NotificationChannel to manage notification settings.</span>
</span><span id="__span-33-22"><a id="__codelineno-33-22" name="__codelineno-33-22" href="#__codelineno-33-22"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">Build</span><span class="p">.</span><span class="na">VERSION</span><span class="p">.</span><span class="na">SDK_INT</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="n">Build</span><span class="p">.</span><span class="na">VERSION_CODES</span><span class="p">.</span><span class="na">O</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-33-23"><a id="__codelineno-33-23" name="__codelineno-33-23" href="#__codelineno-33-23"></a><span class="w">        </span><span class="n">CharSequence</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Notification channel&quot;</span><span class="p">;</span>
</span><span id="__span-33-24"><a id="__codelineno-33-24" name="__codelineno-33-24" href="#__codelineno-33-24"></a><span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Notification channel description&quot;</span><span class="p">;</span>
</span><span id="__span-33-25"><a id="__codelineno-33-25" name="__codelineno-33-25" href="#__codelineno-33-25"></a><span class="w">        </span><span class="kt">int</span><span class="w"> </span><span class="n">importance</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">NotificationManager</span><span class="p">.</span><span class="na">IMPORTANCE_DEFAULT</span><span class="p">;</span>
</span><span id="__span-33-26"><a id="__codelineno-33-26" name="__codelineno-33-26" href="#__codelineno-33-26"></a><span class="w">        </span><span class="n">NotificationChannel</span><span class="w"> </span><span class="n">channel</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">NotificationChannel</span><span class="p">(</span><span class="s">&quot;channel_id&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="n">importance</span><span class="p">);</span>
</span><span id="__span-33-27"><a id="__codelineno-33-27" name="__codelineno-33-27" href="#__codelineno-33-27"></a><span class="w">        </span><span class="n">channel</span><span class="p">.</span><span class="na">setDescription</span><span class="p">(</span><span class="n">description</span><span class="p">);</span>
</span><span id="__span-33-28"><a id="__codelineno-33-28" name="__codelineno-33-28" href="#__codelineno-33-28"></a><span class="w">        </span><span class="c1">// Register the channel with the system. You can&#39;t change the importance</span>
</span><span id="__span-33-29"><a id="__codelineno-33-29" name="__codelineno-33-29" href="#__codelineno-33-29"></a><span class="w">        </span><span class="c1">// or other notification behaviors after this.</span>
</span><span id="__span-33-30"><a id="__codelineno-33-30" name="__codelineno-33-30" href="#__codelineno-33-30"></a><span class="w">        </span><span class="n">NotificationManager</span><span class="w"> </span><span class="n">notificationManager</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">context</span><span class="p">.</span><span class="na">getSystemService</span><span class="p">(</span><span class="n">NotificationManager</span><span class="p">.</span><span class="na">class</span><span class="p">);</span>
</span><span id="__span-33-31"><a id="__codelineno-33-31" name="__codelineno-33-31" href="#__codelineno-33-31"></a><span class="w">        </span><span class="n">notificationManager</span><span class="p">.</span><span class="na">createNotificationChannel</span><span class="p">(</span><span class="n">channel</span><span class="p">);</span>
</span><span id="__span-33-32"><a id="__codelineno-33-32" name="__codelineno-33-32" href="#__codelineno-33-32"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-33-33"><a id="__codelineno-33-33" name="__codelineno-33-33" href="#__codelineno-33-33"></a>
</span><span id="__span-33-34"><a id="__codelineno-33-34" name="__codelineno-33-34" href="#__codelineno-33-34"></a><span class="w">    </span><span class="n">NotificationCompat</span><span class="p">.</span><span class="na">Builder</span><span class="w"> </span><span class="n">builder</span><span class="w"> </span><span class="o">=</span>
</span><span id="__span-33-35"><a id="__codelineno-33-35" name="__codelineno-33-35" href="#__codelineno-33-35"></a><span class="w">        </span><span class="k">new</span><span class="w"> </span><span class="n">NotificationCompat</span><span class="p">.</span><span class="na">Builder</span><span class="p">(</span><span class="n">context</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;channel_id&quot;</span><span class="p">)</span>
</span><span id="__span-33-36"><a id="__codelineno-33-36" name="__codelineno-33-36" href="#__codelineno-33-36"></a><span class="w">            </span><span class="p">.</span><span class="na">setSmallIcon</span><span class="p">(</span><span class="n">R</span><span class="p">.</span><span class="na">drawable</span><span class="p">.</span><span class="na">ic_launcher</span><span class="p">)</span>
</span><span id="__span-33-37"><a id="__codelineno-33-37" name="__codelineno-33-37" href="#__codelineno-33-37"></a><span class="w">            </span><span class="p">.</span><span class="na">setContentTitle</span><span class="p">(</span><span class="s">&quot;Unsupported device!&quot;</span><span class="p">)</span>
</span><span id="__span-33-38"><a id="__codelineno-33-38" name="__codelineno-33-38" href="#__codelineno-33-38"></a><span class="w">            </span><span class="p">.</span><span class="na">setContentText</span><span class="p">(</span><span class="s">&quot;This device is not supported by our application.&quot;</span><span class="p">)</span>
</span><span id="__span-33-39"><a id="__codelineno-33-39" name="__codelineno-33-39" href="#__codelineno-33-39"></a><span class="w">            </span><span class="p">.</span><span class="na">setPriority</span><span class="p">(</span><span class="n">NotificationCompat</span><span class="p">.</span><span class="na">PRIORITY_DEFAULT</span><span class="p">);</span>
</span><span id="__span-33-40"><a id="__codelineno-33-40" name="__codelineno-33-40" href="#__codelineno-33-40"></a>
</span><span id="__span-33-41"><a id="__codelineno-33-41" name="__codelineno-33-41" href="#__codelineno-33-41"></a><span class="w">    </span><span class="n">NotificationManagerCompat</span><span class="w"> </span><span class="n">notificationManagerCompat</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">NotificationManagerCompat</span><span class="p">.</span><span class="na">from</span><span class="p">(</span><span class="n">context</span><span class="p">);</span>
</span><span id="__span-33-42"><a id="__codelineno-33-42" name="__codelineno-33-42" href="#__codelineno-33-42"></a><span class="w">    </span><span class="n">notificationManagerCompat</span><span class="p">.</span><span class="na">notify</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">builder</span><span class="p">.</span><span class="na">build</span><span class="p">());</span>
</span><span id="__span-33-43"><a id="__codelineno-33-43" name="__codelineno-33-43" href="#__codelineno-33-43"></a><span class="p">}</span>
</span></code></pre></div>
</div>
</div>
</div>
</div>
<div class="tabbed-block">
<p>With this example, the user will be redirected to a web page when the app is executed on an emulator.</p>
<div class="language-dexguard highlight"><pre><span></span><code><span id="__span-34-1"><a id="__codelineno-34-1" name="__codelineno-34-1" href="#__codelineno-34-1"></a><span class="err">-</span><span class="kt">raspchecks</span> <span class="kt">emulator</span>
</span><span id="__span-34-2"><a id="__codelineno-34-2" name="__codelineno-34-2" href="#__codelineno-34-2"></a><span class="err">-</span><span class="kt">raspcallback</span> <span class="kt">emulator</span> <span class="kd">class </span><span class="nc">com.example.HelloWorldActivity </span><span class="p">{</span>
</span><span id="__span-34-3"><a id="__codelineno-34-3" name="__codelineno-34-3" href="#__codelineno-34-3"></a>    <span class="k">public</span> <span class="k">static</span> <span class="kt">void</span> <span class="nf">myEmulatorCallback</span><span class="p">(</span><span class="kt">android.content.Context</span><span class="p">,</span> <span class="kt">long</span><span class="p">);</span>
</span><span id="__span-34-4"><a id="__codelineno-34-4" name="__codelineno-34-4" href="#__codelineno-34-4"></a><span class="p">}</span>
</span></code></pre></div>
<div class="tabbed-set tabbed-alternate" data-tabs="12:2"><input checked="checked" id="kotlin_4" name="__tabbed_12" type="radio" /><input id="java_4" name="__tabbed_12" type="radio" /><div class="tabbed-labels"><label for="kotlin_4">Kotlin</label><label for="java_4">Java</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="language-Kotlin highlight"><pre><span></span><code><span id="__span-35-1"><a id="__codelineno-35-1" name="__codelineno-35-1" href="#__codelineno-35-1"></a><span class="nd">@JvmStatic</span>
</span><span id="__span-35-2"><a id="__codelineno-35-2" name="__codelineno-35-2" href="#__codelineno-35-2"></a><span class="kd">fun</span><span class="w"> </span><span class="nf">myEmulatorCallback</span><span class="p">(</span><span class="n">context</span><span class="p">:</span><span class="w"> </span><span class="n">Context?,</span><span class="w"> </span><span class="n">debugInfo</span><span class="p">:</span><span class="w"> </span><span class="kt">Long</span><span class="p">)</span>
</span><span id="__span-35-3"><a id="__codelineno-35-3" name="__codelineno-35-3" href="#__codelineno-35-3"></a><span class="p">{</span>
</span><span id="__span-35-4"><a id="__codelineno-35-4" name="__codelineno-35-4" href="#__codelineno-35-4"></a><span class="w">    </span><span class="c1">// Null check the `context` object to avoid NullPointerExceptions!</span>
</span><span id="__span-35-5"><a id="__codelineno-35-5" name="__codelineno-35-5" href="#__codelineno-35-5"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">context</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-35-6"><a id="__codelineno-35-6" name="__codelineno-35-6" href="#__codelineno-35-6"></a><span class="w">        </span><span class="n">Log</span><span class="p">.</span><span class="na">e</span><span class="p">(</span><span class="s">&quot;HelloWorldActivity&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Context is null, no visual feedback possible&quot;</span><span class="p">)</span>
</span><span id="__span-35-7"><a id="__codelineno-35-7" name="__codelineno-35-7" href="#__codelineno-35-7"></a><span class="w">        </span><span class="k">return</span>
</span><span id="__span-35-8"><a id="__codelineno-35-8" name="__codelineno-35-8" href="#__codelineno-35-8"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-35-9"><a id="__codelineno-35-9" name="__codelineno-35-9" href="#__codelineno-35-9"></a>
</span><span id="__span-35-10"><a id="__codelineno-35-10" name="__codelineno-35-10" href="#__codelineno-35-10"></a><span class="w">    </span><span class="c1">// Optionally provide visual feedback using the provided context.</span>
</span><span id="__span-35-11"><a id="__codelineno-35-11" name="__codelineno-35-11" href="#__codelineno-35-11"></a><span class="w">    </span><span class="kd">val</span><span class="w"> </span><span class="nv">browserIntent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Intent</span><span class="p">(</span><span class="n">Intent</span><span class="p">.</span><span class="na">ACTION_VIEW</span><span class="p">,</span><span class="w"> </span><span class="n">Uri</span><span class="p">.</span><span class="na">parse</span><span class="p">(</span><span class="s">&quot;http://www.google.com&quot;</span><span class="p">))</span>
</span><span id="__span-35-12"><a id="__codelineno-35-12" name="__codelineno-35-12" href="#__codelineno-35-12"></a><span class="w">    </span><span class="n">browserIntent</span><span class="p">.</span><span class="na">setFlags</span><span class="p">(</span><span class="n">Intent</span><span class="p">.</span><span class="na">FLAG_ACTIVITY_NEW_TASK</span><span class="p">)</span>
</span><span id="__span-35-13"><a id="__codelineno-35-13" name="__codelineno-35-13" href="#__codelineno-35-13"></a><span class="w">    </span><span class="n">context</span><span class="o">?.</span><span class="na">startActivity</span><span class="p">(</span><span class="n">browserIntent</span><span class="p">)</span>
</span><span id="__span-35-14"><a id="__codelineno-35-14" name="__codelineno-35-14" href="#__codelineno-35-14"></a><span class="p">}</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="language-Java highlight"><pre><span></span><code><span id="__span-36-1"><a id="__codelineno-36-1" name="__codelineno-36-1" href="#__codelineno-36-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">myEmulatorCallback</span><span class="p">(</span><span class="n">Context</span><span class="w"> </span><span class="n">context</span><span class="p">,</span><span class="w"> </span><span class="kt">long</span><span class="w"> </span><span class="n">debugInfo</span><span class="p">)</span>
</span><span id="__span-36-2"><a id="__codelineno-36-2" name="__codelineno-36-2" href="#__codelineno-36-2"></a><span class="p">{</span>
</span><span id="__span-36-3"><a id="__codelineno-36-3" name="__codelineno-36-3" href="#__codelineno-36-3"></a><span class="w">    </span><span class="c1">// Null check the `context` object to avoid NullPointerExceptions!</span>
</span><span id="__span-36-4"><a id="__codelineno-36-4" name="__codelineno-36-4" href="#__codelineno-36-4"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">context</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-36-5"><a id="__codelineno-36-5" name="__codelineno-36-5" href="#__codelineno-36-5"></a><span class="w">      </span><span class="n">Log</span><span class="p">.</span><span class="na">e</span><span class="p">(</span><span class="s">&quot;HelloWorldActivity&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Context is null, no visual feedback possible&quot;</span><span class="p">);</span>
</span><span id="__span-36-6"><a id="__codelineno-36-6" name="__codelineno-36-6" href="#__codelineno-36-6"></a><span class="w">      </span><span class="k">return</span><span class="p">;</span>
</span><span id="__span-36-7"><a id="__codelineno-36-7" name="__codelineno-36-7" href="#__codelineno-36-7"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-36-8"><a id="__codelineno-36-8" name="__codelineno-36-8" href="#__codelineno-36-8"></a>
</span><span id="__span-36-9"><a id="__codelineno-36-9" name="__codelineno-36-9" href="#__codelineno-36-9"></a><span class="w">    </span><span class="c1">// Optionally provide visual feedback using the provided context.</span>
</span><span id="__span-36-10"><a id="__codelineno-36-10" name="__codelineno-36-10" href="#__codelineno-36-10"></a><span class="w">    </span><span class="n">Intent</span><span class="w"> </span><span class="n">browserIntent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Intent</span><span class="p">(</span><span class="n">Intent</span><span class="p">.</span><span class="na">ACTION_VIEW</span><span class="p">,</span><span class="w"> </span><span class="n">Uri</span><span class="p">.</span><span class="na">parse</span><span class="p">(</span><span class="s">&quot;http://www.google.com&quot;</span><span class="p">));</span>
</span><span id="__span-36-11"><a id="__codelineno-36-11" name="__codelineno-36-11" href="#__codelineno-36-11"></a><span class="w">    </span><span class="n">browserIntent</span><span class="p">.</span><span class="na">setFlags</span><span class="p">(</span><span class="n">Intent</span><span class="p">.</span><span class="na">FLAG_ACTIVITY_NEW_TASK</span><span class="p">);</span>
</span><span id="__span-36-12"><a id="__codelineno-36-12" name="__codelineno-36-12" href="#__codelineno-36-12"></a><span class="w">    </span><span class="n">context</span><span class="p">.</span><span class="na">startActivity</span><span class="p">(</span><span class="n">browserIntent</span><span class="p">);</span>
</span><span id="__span-36-13"><a id="__codelineno-36-13" name="__codelineno-36-13" href="#__codelineno-36-13"></a><span class="p">}</span>
</span></code></pre></div>
</div>
</div>
</div>
</div>
<div class="tabbed-block">
<p>With this example, the user will be redirected to a web page when the app is executed on an emulator.</p>
<div class="language-dexguard highlight"><pre><span></span><code><span id="__span-37-1"><a id="__codelineno-37-1" name="__codelineno-37-1" href="#__codelineno-37-1"></a><span class="err">-</span><span class="kt">raspchecks</span> <span class="kt">emulator</span>
</span><span id="__span-37-2"><a id="__codelineno-37-2" name="__codelineno-37-2" href="#__codelineno-37-2"></a><span class="err">-</span><span class="kt">raspcallback</span> <span class="kt">emulator</span> <span class="kd">class </span><span class="nc">com.example.HelloWorldActivity </span><span class="p">{</span>
</span><span id="__span-37-3"><a id="__codelineno-37-3" name="__codelineno-37-3" href="#__codelineno-37-3"></a>    <span class="k">public</span> <span class="k">static</span> <span class="kt">void</span> <span class="nf">myEmulatorCallback</span><span class="p">(</span><span class="kt">android.content.Context</span><span class="p">,</span> <span class="kt">long</span><span class="p">);</span>
</span><span id="__span-37-4"><a id="__codelineno-37-4" name="__codelineno-37-4" href="#__codelineno-37-4"></a><span class="p">}</span>
</span></code></pre></div>
<div class="tabbed-set tabbed-alternate" data-tabs="13:2"><input checked="checked" id="kotlin_5" name="__tabbed_13" type="radio" /><input id="java_5" name="__tabbed_13" type="radio" /><div class="tabbed-labels"><label for="kotlin_5">Kotlin</label><label for="java_5">Java</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="language-Kotlin highlight"><pre><span></span><code><span id="__span-38-1"><a id="__codelineno-38-1" name="__codelineno-38-1" href="#__codelineno-38-1"></a><span class="nd">@JvmStatic</span>
</span><span id="__span-38-2"><a id="__codelineno-38-2" name="__codelineno-38-2" href="#__codelineno-38-2"></a><span class="kd">fun</span><span class="w"> </span><span class="nf">myEmulatorCallback</span><span class="p">(</span><span class="n">context</span><span class="p">:</span><span class="w"> </span><span class="n">Context?,</span><span class="w"> </span><span class="n">debugInfo</span><span class="p">:</span><span class="w"> </span><span class="kt">Long</span><span class="p">)</span>
</span><span id="__span-38-3"><a id="__codelineno-38-3" name="__codelineno-38-3" href="#__codelineno-38-3"></a><span class="p">{</span>
</span><span id="__span-38-4"><a id="__codelineno-38-4" name="__codelineno-38-4" href="#__codelineno-38-4"></a><span class="w">    </span><span class="c1">// Null check the `context` object to avoid NullPointerExceptions!</span>
</span><span id="__span-38-5"><a id="__codelineno-38-5" name="__codelineno-38-5" href="#__codelineno-38-5"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">context</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-38-6"><a id="__codelineno-38-6" name="__codelineno-38-6" href="#__codelineno-38-6"></a><span class="w">        </span><span class="n">Log</span><span class="p">.</span><span class="na">e</span><span class="p">(</span><span class="s">&quot;HelloWorldActivity&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Context is null, no visual feedback possible&quot;</span><span class="p">)</span>
</span><span id="__span-38-7"><a id="__codelineno-38-7" name="__codelineno-38-7" href="#__codelineno-38-7"></a><span class="w">        </span><span class="k">return</span>
</span><span id="__span-38-8"><a id="__codelineno-38-8" name="__codelineno-38-8" href="#__codelineno-38-8"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-38-9"><a id="__codelineno-38-9" name="__codelineno-38-9" href="#__codelineno-38-9"></a>
</span><span id="__span-38-10"><a id="__codelineno-38-10" name="__codelineno-38-10" href="#__codelineno-38-10"></a><span class="w">    </span><span class="c1">// Optionally provide visual feedback using the provided context.</span>
</span><span id="__span-38-11"><a id="__codelineno-38-11" name="__codelineno-38-11" href="#__codelineno-38-11"></a><span class="w">    </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-38-12"><a id="__codelineno-38-12" name="__codelineno-38-12" href="#__codelineno-38-12"></a><span class="w">        </span><span class="kd">val</span><span class="w"> </span><span class="nv">builder</span><span class="p">:</span><span class="w"> </span><span class="n">java</span><span class="p">.</span><span class="na">lang</span><span class="p">.</span><span class="na">StringBuilder</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">java</span><span class="p">.</span><span class="na">lang</span><span class="p">.</span><span class="na">StringBuilder</span><span class="p">()</span>
</span><span id="__span-38-13"><a id="__codelineno-38-13" name="__codelineno-38-13" href="#__codelineno-38-13"></a><span class="w">        </span><span class="kd">val</span><span class="w"> </span><span class="nv">`is`</span><span class="p">:</span><span class="w"> </span><span class="n">java</span><span class="p">.</span><span class="na">io</span><span class="p">.</span><span class="na">InputStream</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HelloWorldActivity</span><span class="o">::</span><span class="n">class</span><span class="p">.</span><span class="na">java</span><span class="p">.</span><span class="na">getResourceAsStream</span><span class="p">(</span><span class="s">&quot;/assets/index.html&quot;</span><span class="p">)</span>
</span><span id="__span-38-14"><a id="__codelineno-38-14" name="__codelineno-38-14" href="#__codelineno-38-14"></a><span class="w">        </span><span class="kd">val</span><span class="w"> </span><span class="nv">reader</span><span class="p">:</span><span class="w"> </span><span class="n">java</span><span class="p">.</span><span class="na">io</span><span class="p">.</span><span class="na">BufferedReader</span><span class="w"> </span><span class="o">=</span>
</span><span id="__span-38-15"><a id="__codelineno-38-15" name="__codelineno-38-15" href="#__codelineno-38-15"></a><span class="w">            </span><span class="n">java</span><span class="p">.</span><span class="na">io</span><span class="p">.</span><span class="na">BufferedReader</span><span class="p">(</span><span class="n">java</span><span class="p">.</span><span class="na">io</span><span class="p">.</span><span class="na">InputStreamReader</span><span class="p">(</span><span class="n">`is`</span><span class="p">,</span><span class="w"> </span><span class="n">java</span><span class="p">.</span><span class="na">nio</span><span class="p">.</span><span class="na">charset</span><span class="p">.</span><span class="na">StandardCharsets</span><span class="p">.</span><span class="na">UTF_8</span><span class="p">))</span>
</span><span id="__span-38-16"><a id="__codelineno-38-16" name="__codelineno-38-16" href="#__codelineno-38-16"></a>
</span><span id="__span-38-17"><a id="__codelineno-38-17" name="__codelineno-38-17" href="#__codelineno-38-17"></a><span class="w">        </span><span class="kd">var</span><span class="w"> </span><span class="nv">buffer</span><span class="p">:</span><span class="w"> </span><span class="kt">String?</span>
</span><span id="__span-38-18"><a id="__codelineno-38-18" name="__codelineno-38-18" href="#__codelineno-38-18"></a><span class="w">        </span><span class="k">while</span><span class="w"> </span><span class="p">((</span><span class="n">reader</span><span class="p">.</span><span class="na">readLine</span><span class="p">().</span><span class="na">also</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">buffer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">it</span><span class="w"> </span><span class="p">})</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-38-19"><a id="__codelineno-38-19" name="__codelineno-38-19" href="#__codelineno-38-19"></a><span class="w">            </span><span class="n">builder</span><span class="p">.</span><span class="na">append</span><span class="p">(</span><span class="n">buffer</span><span class="p">)</span>
</span><span id="__span-38-20"><a id="__codelineno-38-20" name="__codelineno-38-20" href="#__codelineno-38-20"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-38-21"><a id="__codelineno-38-21" name="__codelineno-38-21" href="#__codelineno-38-21"></a><span class="w">        </span><span class="n">reader</span><span class="p">.</span><span class="na">close</span><span class="p">()</span>
</span><span id="__span-38-22"><a id="__codelineno-38-22" name="__codelineno-38-22" href="#__codelineno-38-22"></a>
</span><span id="__span-38-23"><a id="__codelineno-38-23" name="__codelineno-38-23" href="#__codelineno-38-23"></a><span class="w">        </span><span class="kd">val</span><span class="w"> </span><span class="nv">outputStream</span><span class="p">:</span><span class="w"> </span><span class="n">java</span><span class="p">.</span><span class="na">io</span><span class="p">.</span><span class="na">FileOutputStream</span><span class="w"> </span><span class="o">=</span>
</span><span id="__span-38-24"><a id="__codelineno-38-24" name="__codelineno-38-24" href="#__codelineno-38-24"></a><span class="w">            </span><span class="n">java</span><span class="p">.</span><span class="na">io</span><span class="p">.</span><span class="na">FileOutputStream</span><span class="p">(</span><span class="n">java</span><span class="p">.</span><span class="na">io</span><span class="p">.</span><span class="na">File</span><span class="p">(</span><span class="n">context</span><span class="p">.</span><span class="na">getFilesDir</span><span class="p">(),</span><span class="w"> </span><span class="s">&quot;index.html&quot;</span><span class="p">))</span>
</span><span id="__span-38-25"><a id="__codelineno-38-25" name="__codelineno-38-25" href="#__codelineno-38-25"></a><span class="w">        </span><span class="n">outputStream</span><span class="p">.</span><span class="na">write</span><span class="p">(</span><span class="n">builder</span><span class="p">.</span><span class="na">toString</span><span class="p">().</span><span class="na">toByteArray</span><span class="p">(</span><span class="n">java</span><span class="p">.</span><span class="na">nio</span><span class="p">.</span><span class="na">charset</span><span class="p">.</span><span class="na">StandardCharsets</span><span class="p">.</span><span class="na">UTF_8</span><span class="p">))</span>
</span><span id="__span-38-26"><a id="__codelineno-38-26" name="__codelineno-38-26" href="#__codelineno-38-26"></a><span class="w">        </span><span class="n">outputStream</span><span class="p">.</span><span class="na">close</span><span class="p">()</span>
</span><span id="__span-38-27"><a id="__codelineno-38-27" name="__codelineno-38-27" href="#__codelineno-38-27"></a>
</span><span id="__span-38-28"><a id="__codelineno-38-28" name="__codelineno-38-28" href="#__codelineno-38-28"></a><span class="w">        </span><span class="c1">// Get the file URI.</span>
</span><span id="__span-38-29"><a id="__codelineno-38-29" name="__codelineno-38-29" href="#__codelineno-38-29"></a><span class="w">        </span><span class="kd">val</span><span class="w"> </span><span class="nv">file</span><span class="p">:</span><span class="w"> </span><span class="n">java</span><span class="p">.</span><span class="na">io</span><span class="p">.</span><span class="na">File</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">java</span><span class="p">.</span><span class="na">io</span><span class="p">.</span><span class="na">File</span><span class="p">(</span><span class="n">context</span><span class="p">.</span><span class="na">getFilesDir</span><span class="p">(),</span><span class="w"> </span><span class="s">&quot;index.html&quot;</span><span class="p">)</span>
</span><span id="__span-38-30"><a id="__codelineno-38-30" name="__codelineno-38-30" href="#__codelineno-38-30"></a><span class="w">        </span><span class="kd">val</span><span class="w"> </span><span class="nv">uri</span><span class="p">:</span><span class="w"> </span><span class="n">android</span><span class="p">.</span><span class="na">net</span><span class="p">.</span><span class="na">Uri</span><span class="w"> </span><span class="o">=</span>
</span><span id="__span-38-31"><a id="__codelineno-38-31" name="__codelineno-38-31" href="#__codelineno-38-31"></a><span class="w">            </span><span class="n">FileProvider</span><span class="p">.</span><span class="na">getUriForFile</span><span class="p">(</span><span class="n">context</span><span class="p">,</span><span class="w"> </span><span class="n">context</span><span class="p">.</span><span class="na">getPackageName</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&quot;.provider&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">file</span><span class="p">)</span>
</span><span id="__span-38-32"><a id="__codelineno-38-32" name="__codelineno-38-32" href="#__codelineno-38-32"></a>
</span><span id="__span-38-33"><a id="__codelineno-38-33" name="__codelineno-38-33" href="#__codelineno-38-33"></a><span class="w">        </span><span class="c1">// Open the file in the system browser.</span>
</span><span id="__span-38-34"><a id="__codelineno-38-34" name="__codelineno-38-34" href="#__codelineno-38-34"></a><span class="w">        </span><span class="kd">val</span><span class="w"> </span><span class="nv">browserIntent</span><span class="p">:</span><span class="w"> </span><span class="n">android</span><span class="p">.</span><span class="na">content</span><span class="p">.</span><span class="na">Intent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">android</span><span class="p">.</span><span class="na">content</span><span class="p">.</span><span class="na">Intent</span><span class="p">(</span><span class="n">android</span><span class="p">.</span><span class="na">content</span><span class="p">.</span><span class="na">Intent</span><span class="p">.</span><span class="na">ACTION_VIEW</span><span class="p">)</span>
</span><span id="__span-38-35"><a id="__codelineno-38-35" name="__codelineno-38-35" href="#__codelineno-38-35"></a><span class="w">        </span><span class="n">browserIntent</span><span class="p">.</span><span class="na">setDataAndType</span><span class="p">(</span><span class="n">uri</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;text/html&quot;</span><span class="p">)</span>
</span><span id="__span-38-36"><a id="__codelineno-38-36" name="__codelineno-38-36" href="#__codelineno-38-36"></a><span class="w">        </span><span class="n">browserIntent</span><span class="p">.</span><span class="na">setFlags</span><span class="p">(</span><span class="n">android</span><span class="p">.</span><span class="na">content</span><span class="p">.</span><span class="na">Intent</span><span class="p">.</span><span class="na">FLAG_GRANT_READ_URI_PERMISSION</span><span class="w"> </span><span class="n">or</span><span class="w"> </span><span class="n">android</span><span class="p">.</span><span class="na">content</span><span class="p">.</span><span class="na">Intent</span><span class="p">.</span><span class="na">FLAG_ACTIVITY_NEW_TASK</span><span class="p">)</span>
</span><span id="__span-38-37"><a id="__codelineno-38-37" name="__codelineno-38-37" href="#__codelineno-38-37"></a><span class="w">        </span><span class="n">context</span><span class="p">.</span><span class="na">startActivity</span><span class="p">(</span><span class="n">browserIntent</span><span class="p">)</span>
</span><span id="__span-38-38"><a id="__codelineno-38-38" name="__codelineno-38-38" href="#__codelineno-38-38"></a><span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="n">e</span><span class="p">:</span><span class="w"> </span><span class="n">java</span><span class="p">.</span><span class="na">io</span><span class="p">.</span><span class="na">IOException</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-38-39"><a id="__codelineno-38-39" name="__codelineno-38-39" href="#__codelineno-38-39"></a><span class="w">        </span><span class="k">throw</span><span class="w"> </span><span class="n">java</span><span class="p">.</span><span class="na">lang</span><span class="p">.</span><span class="na">RuntimeException</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</span><span id="__span-38-40"><a id="__codelineno-38-40" name="__codelineno-38-40" href="#__codelineno-38-40"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-38-41"><a id="__codelineno-38-41" name="__codelineno-38-41" href="#__codelineno-38-41"></a><span class="p">}</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="language-Java highlight"><pre><span></span><code><span id="__span-39-1"><a id="__codelineno-39-1" name="__codelineno-39-1" href="#__codelineno-39-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">myEmulatorCallback</span><span class="p">(</span><span class="n">Context</span><span class="w"> </span><span class="n">context</span><span class="p">,</span><span class="w"> </span><span class="kt">long</span><span class="w"> </span><span class="n">debugInfo</span><span class="p">)</span>
</span><span id="__span-39-2"><a id="__codelineno-39-2" name="__codelineno-39-2" href="#__codelineno-39-2"></a><span class="p">{</span>
</span><span id="__span-39-3"><a id="__codelineno-39-3" name="__codelineno-39-3" href="#__codelineno-39-3"></a><span class="w">    </span><span class="c1">// Null check the `context` object to avoid NullPointerExceptions!</span>
</span><span id="__span-39-4"><a id="__codelineno-39-4" name="__codelineno-39-4" href="#__codelineno-39-4"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">context</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-39-5"><a id="__codelineno-39-5" name="__codelineno-39-5" href="#__codelineno-39-5"></a><span class="w">      </span><span class="n">Log</span><span class="p">.</span><span class="na">e</span><span class="p">(</span><span class="s">&quot;HelloWorldActivity&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Context is null, no visual feedback possible&quot;</span><span class="p">);</span>
</span><span id="__span-39-6"><a id="__codelineno-39-6" name="__codelineno-39-6" href="#__codelineno-39-6"></a><span class="w">      </span><span class="k">return</span><span class="p">;</span>
</span><span id="__span-39-7"><a id="__codelineno-39-7" name="__codelineno-39-7" href="#__codelineno-39-7"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-39-8"><a id="__codelineno-39-8" name="__codelineno-39-8" href="#__codelineno-39-8"></a>
</span><span id="__span-39-9"><a id="__codelineno-39-9" name="__codelineno-39-9" href="#__codelineno-39-9"></a><span class="w">    </span><span class="c1">// Optionally provide visual feedback using the provided context.</span>
</span><span id="__span-39-10"><a id="__codelineno-39-10" name="__codelineno-39-10" href="#__codelineno-39-10"></a><span class="w">    </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-39-11"><a id="__codelineno-39-11" name="__codelineno-39-11" href="#__codelineno-39-11"></a><span class="w">        </span><span class="n">StringBuilder</span><span class="w"> </span><span class="n">builder</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">StringBuilder</span><span class="p">();</span>
</span><span id="__span-39-12"><a id="__codelineno-39-12" name="__codelineno-39-12" href="#__codelineno-39-12"></a><span class="w">        </span><span class="n">InputStream</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HelloWorldActivity</span><span class="p">.</span><span class="na">class</span><span class="p">.</span><span class="na">getResourceAsStream</span><span class="p">(</span><span class="s">&quot;/assets/index.html&quot;</span><span class="p">);</span>
</span><span id="__span-39-13"><a id="__codelineno-39-13" name="__codelineno-39-13" href="#__codelineno-39-13"></a><span class="w">        </span><span class="n">BufferedReader</span><span class="w"> </span><span class="n">reader</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">BufferedReader</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">InputStreamReader</span><span class="p">(</span><span class="n">is</span><span class="p">,</span><span class="w"> </span><span class="n">StandardCharsets</span><span class="p">.</span><span class="na">UTF_8</span><span class="p">));</span>
</span><span id="__span-39-14"><a id="__codelineno-39-14" name="__codelineno-39-14" href="#__codelineno-39-14"></a>
</span><span id="__span-39-15"><a id="__codelineno-39-15" name="__codelineno-39-15" href="#__codelineno-39-15"></a><span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">buffer</span><span class="p">;</span>
</span><span id="__span-39-16"><a id="__codelineno-39-16" name="__codelineno-39-16" href="#__codelineno-39-16"></a><span class="w">        </span><span class="k">while</span><span class="w"> </span><span class="p">((</span><span class="n">buffer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">reader</span><span class="p">.</span><span class="na">readLine</span><span class="p">())</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-39-17"><a id="__codelineno-39-17" name="__codelineno-39-17" href="#__codelineno-39-17"></a><span class="w">            </span><span class="n">builder</span><span class="p">.</span><span class="na">append</span><span class="p">(</span><span class="n">buffer</span><span class="p">);</span>
</span><span id="__span-39-18"><a id="__codelineno-39-18" name="__codelineno-39-18" href="#__codelineno-39-18"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-39-19"><a id="__codelineno-39-19" name="__codelineno-39-19" href="#__codelineno-39-19"></a><span class="w">        </span><span class="n">reader</span><span class="p">.</span><span class="na">close</span><span class="p">();</span>
</span><span id="__span-39-20"><a id="__codelineno-39-20" name="__codelineno-39-20" href="#__codelineno-39-20"></a>
</span><span id="__span-39-21"><a id="__codelineno-39-21" name="__codelineno-39-21" href="#__codelineno-39-21"></a><span class="w">        </span><span class="n">FileOutputStream</span><span class="w"> </span><span class="n">outputStream</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">FileOutputStream</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">File</span><span class="p">(</span><span class="n">context</span><span class="p">.</span><span class="na">getFilesDir</span><span class="p">(),</span><span class="w"> </span><span class="s">&quot;index.html&quot;</span><span class="p">));</span>
</span><span id="__span-39-22"><a id="__codelineno-39-22" name="__codelineno-39-22" href="#__codelineno-39-22"></a><span class="w">        </span><span class="n">outputStream</span><span class="p">.</span><span class="na">write</span><span class="p">(</span><span class="n">builder</span><span class="p">.</span><span class="na">toString</span><span class="p">().</span><span class="na">getBytes</span><span class="p">(</span><span class="n">StandardCharsets</span><span class="p">.</span><span class="na">UTF_8</span><span class="p">));</span>
</span><span id="__span-39-23"><a id="__codelineno-39-23" name="__codelineno-39-23" href="#__codelineno-39-23"></a><span class="w">        </span><span class="n">outputStream</span><span class="p">.</span><span class="na">close</span><span class="p">();</span>
</span><span id="__span-39-24"><a id="__codelineno-39-24" name="__codelineno-39-24" href="#__codelineno-39-24"></a>
</span><span id="__span-39-25"><a id="__codelineno-39-25" name="__codelineno-39-25" href="#__codelineno-39-25"></a><span class="w">        </span><span class="c1">// Get the file URI.</span>
</span><span id="__span-39-26"><a id="__codelineno-39-26" name="__codelineno-39-26" href="#__codelineno-39-26"></a><span class="w">        </span><span class="n">File</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">File</span><span class="p">(</span><span class="n">context</span><span class="p">.</span><span class="na">getFilesDir</span><span class="p">(),</span><span class="w"> </span><span class="s">&quot;index.html&quot;</span><span class="p">);</span>
</span><span id="__span-39-27"><a id="__codelineno-39-27" name="__codelineno-39-27" href="#__codelineno-39-27"></a><span class="w">        </span><span class="n">Uri</span><span class="w"> </span><span class="n">uri</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">FileProvider</span><span class="p">.</span><span class="na">getUriForFile</span><span class="p">(</span><span class="n">context</span><span class="p">,</span><span class="w"> </span><span class="n">context</span><span class="p">.</span><span class="na">getPackageName</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&quot;.provider&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">file</span><span class="p">);</span>
</span><span id="__span-39-28"><a id="__codelineno-39-28" name="__codelineno-39-28" href="#__codelineno-39-28"></a>
</span><span id="__span-39-29"><a id="__codelineno-39-29" name="__codelineno-39-29" href="#__codelineno-39-29"></a><span class="w">        </span><span class="c1">// Open the file in the system browser.</span>
</span><span id="__span-39-30"><a id="__codelineno-39-30" name="__codelineno-39-30" href="#__codelineno-39-30"></a><span class="w">        </span><span class="n">Intent</span><span class="w"> </span><span class="n">browserIntent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Intent</span><span class="p">(</span><span class="n">Intent</span><span class="p">.</span><span class="na">ACTION_VIEW</span><span class="p">);</span>
</span><span id="__span-39-31"><a id="__codelineno-39-31" name="__codelineno-39-31" href="#__codelineno-39-31"></a><span class="w">        </span><span class="n">browserIntent</span><span class="p">.</span><span class="na">setDataAndType</span><span class="p">(</span><span class="n">uri</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;text/html&quot;</span><span class="p">);</span>
</span><span id="__span-39-32"><a id="__codelineno-39-32" name="__codelineno-39-32" href="#__codelineno-39-32"></a><span class="w">        </span><span class="n">browserIntent</span><span class="p">.</span><span class="na">setFlags</span><span class="p">(</span><span class="n">Intent</span><span class="p">.</span><span class="na">FLAG_GRANT_READ_URI_PERMISSION</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Intent</span><span class="p">.</span><span class="na">FLAG_ACTIVITY_NEW_TASK</span><span class="p">);</span>
</span><span id="__span-39-33"><a id="__codelineno-39-33" name="__codelineno-39-33" href="#__codelineno-39-33"></a><span class="w">        </span><span class="n">context</span><span class="p">.</span><span class="na">startActivity</span><span class="p">(</span><span class="n">browserIntent</span><span class="p">);</span>
</span><span id="__span-39-34"><a id="__codelineno-39-34" name="__codelineno-39-34" href="#__codelineno-39-34"></a>
</span><span id="__span-39-35"><a id="__codelineno-39-35" name="__codelineno-39-35" href="#__codelineno-39-35"></a><span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="n">IOException</span><span class="w"> </span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-39-36"><a id="__codelineno-39-36" name="__codelineno-39-36" href="#__codelineno-39-36"></a><span class="w">        </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">RuntimeException</span><span class="p">(</span><span class="n">e</span><span class="p">);</span>
</span><span id="__span-39-37"><a id="__codelineno-39-37" name="__codelineno-39-37" href="#__codelineno-39-37"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-39-38"><a id="__codelineno-39-38" name="__codelineno-39-38" href="#__codelineno-39-38"></a><span class="p">}</span>
</span></code></pre></div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Try and experiment with the visual callbacks using the RASPCallbackWithContext
sample, which can be found at <code>samples/features/RASPCallbackWithContext</code>.</p>
</div>
</div>
<div class="tabbed-block">
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Callbacks that take <code>DetectionReport</code> as an argument are deprecated. It's more resilient against
reverse engineering to use multiple callbacks that take a <code>long</code> value as an argument.</p>
</div>
<p>For backward compatibility, the deprecated single callback for all RASP checks will continue working
as previously.</p>
<p>In order to add a callback, you must add a dependency to your project.
You need to add the following to your root-level <code>build.gradle</code> file or add it inside the <code>dependencyResolutionManagement</code>,
if a modular project structure is used:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="14:3"><input checked="checked" id="manual-download-kotlin" name="__tabbed_14" type="radio" /><input id="manual-download-groovy" name="__tabbed_14" type="radio" /><input id="maven" name="__tabbed_14" type="radio" /><div class="tabbed-labels"><label for="manual-download-kotlin">Manual Download (Kotlin)</label><label for="manual-download-groovy">Manual Download (Groovy)</label><label for="maven">Maven</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="language-kotlin highlight"><pre><span></span><code><span id="__span-40-1"><a id="__codelineno-40-1" name="__codelineno-40-1" href="#__codelineno-40-1"></a><span class="n">repositories</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-40-2"><a id="__codelineno-40-2" name="__codelineno-40-2" href="#__codelineno-40-2"></a><span class="w">    </span><span class="n">flatDir</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">dirs</span><span class="p">(</span><span class="s">&quot;libs&quot;</span><span class="p">)</span><span class="w"> </span><span class="p">}</span>
</span><span id="__span-40-3"><a id="__codelineno-40-3" name="__codelineno-40-3" href="#__codelineno-40-3"></a><span class="p">}</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="language-groovy highlight"><pre><span></span><code><span id="__span-41-1"><a id="__codelineno-41-1" name="__codelineno-41-1" href="#__codelineno-41-1"></a><span class="n">repositories</span><span class="w"> </span><span class="o">{</span>
</span><span id="__span-41-2"><a id="__codelineno-41-2" name="__codelineno-41-2" href="#__codelineno-41-2"></a><span class="w">    </span><span class="n">flatDir</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="n">dirs</span><span class="w"> </span><span class="s1">&#39;libs&#39;</span><span class="w"> </span><span class="o">}</span>
</span><span id="__span-41-3"><a id="__codelineno-41-3" name="__codelineno-41-3" href="#__codelineno-41-3"></a><span class="o">}</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="language-groovy highlight"><pre><span></span><code><span id="__span-42-1"><a id="__codelineno-42-1" name="__codelineno-42-1" href="#__codelineno-42-1"></a><span class="n">repositories</span><span class="w"> </span><span class="o">{</span>
</span><span id="__span-42-2"><a id="__codelineno-42-2" name="__codelineno-42-2" href="#__codelineno-42-2"></a><span class="w">    </span><span class="n">maven</span><span class="w"> </span><span class="o">{</span>
</span><span id="__span-42-3"><a id="__codelineno-42-3" name="__codelineno-42-3" href="#__codelineno-42-3"></a><span class="w">        </span><span class="n">credentials</span><span class="w"> </span><span class="o">{</span>
</span><span id="__span-42-4"><a id="__codelineno-42-4" name="__codelineno-42-4" href="#__codelineno-42-4"></a><span class="w">            </span><span class="n">username</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;maven&quot;</span>
</span><span id="__span-42-5"><a id="__codelineno-42-5" name="__codelineno-42-5" href="#__codelineno-42-5"></a><span class="w">            </span><span class="n">password</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;${dexguardMavenToken}&quot;</span>
</span><span id="__span-42-6"><a id="__codelineno-42-6" name="__codelineno-42-6" href="#__codelineno-42-6"></a><span class="w">        </span><span class="o">}</span>
</span><span id="__span-42-7"><a id="__codelineno-42-7" name="__codelineno-42-7" href="#__codelineno-42-7"></a><span class="w">        </span><span class="n">url</span><span class="w"> </span><span class="s2">&quot;https://maven.guardsquare.com&quot;</span>
</span><span id="__span-42-8"><a id="__codelineno-42-8" name="__codelineno-42-8" href="#__codelineno-42-8"></a><span class="w">        </span><span class="n">authentication</span><span class="w"> </span><span class="o">{</span>
</span><span id="__span-42-9"><a id="__codelineno-42-9" name="__codelineno-42-9" href="#__codelineno-42-9"></a><span class="w">            </span><span class="n">basic</span><span class="o">(</span><span class="n">BasicAuthentication</span><span class="o">)</span>
</span><span id="__span-42-10"><a id="__codelineno-42-10" name="__codelineno-42-10" href="#__codelineno-42-10"></a><span class="w">        </span><span class="o">}</span>
</span><span id="__span-42-11"><a id="__codelineno-42-11" name="__codelineno-42-11" href="#__codelineno-42-11"></a><span class="w">    </span><span class="o">}</span>
</span><span id="__span-42-12"><a id="__codelineno-42-12" name="__codelineno-42-12" href="#__codelineno-42-12"></a><span class="o">}</span>
</span></code></pre></div>
</div>
</div>
</div>
<p>The dependency then needs to be added to the <code>build.gradle</code> of the module where the callback is located:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="15:3"><input checked="checked" id="manual-download-kotlin_1" name="__tabbed_15" type="radio" /><input id="manual-download-groovy_1" name="__tabbed_15" type="radio" /><input id="maven_1" name="__tabbed_15" type="radio" /><div class="tabbed-labels"><label for="manual-download-kotlin_1">Manual Download (Kotlin)</label><label for="manual-download-groovy_1">Manual Download (Groovy)</label><label for="maven_1">Maven</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="language-kotlin highlight"><pre><span></span><code><span id="__span-43-1"><a id="__codelineno-43-1" name="__codelineno-43-1" href="#__codelineno-43-1"></a><span class="n">dependencies</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-43-2"><a id="__codelineno-43-2" name="__codelineno-43-2" href="#__codelineno-43-2"></a><span class="w">    </span><span class="n">compileOnly</span><span class="p">(</span><span class="n">mapOf</span><span class="p">(</span><span class="s">&quot;name&quot;</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="s">&quot;dexguard-rasp&quot;</span><span class="p">,</span>
</span><span id="__span-43-3"><a id="__codelineno-43-3" name="__codelineno-43-3" href="#__codelineno-43-3"></a><span class="w">                      </span><span class="s">&quot;ext&quot;</span><span class="w">  </span><span class="n">to</span><span class="w"> </span><span class="s">&quot;jar&quot;</span><span class="p">)</span>
</span><span id="__span-43-4"><a id="__codelineno-43-4" name="__codelineno-43-4" href="#__codelineno-43-4"></a><span class="p">}</span>
</span></code></pre></div>
<p>You can find the dependency at the following locations:</p>
<p><center></p>
<table>
<thead>
<tr>
<th>Dependency</th>
<th>Location</th>
</tr>
</thead>
<tbody>
<tr>
<td>DexGuard RASP support library</td>
<td>${DexGuardInstallPath}/lib/dexguard-rasp.jar</td>
</tr>
</tbody>
</table>
<p></center></p>
</div>
<div class="tabbed-block">
<div class="language-groovy highlight"><pre><span></span><code><span id="__span-44-1"><a id="__codelineno-44-1" name="__codelineno-44-1" href="#__codelineno-44-1"></a><span class="n">dependencies</span><span class="w"> </span><span class="o">{</span>
</span><span id="__span-44-2"><a id="__codelineno-44-2" name="__codelineno-44-2" href="#__codelineno-44-2"></a><span class="w">    </span><span class="n">compileOnly</span><span class="w"> </span><span class="o">(</span><span class="nl">name:</span><span class="w"> </span><span class="s1">&#39;dexguard-rasp&#39;</span><span class="o">,</span><span class="w"> </span><span class="nl">ext:</span><span class="w"> </span><span class="s1">&#39;jar&#39;</span><span class="o">)</span>
</span><span id="__span-44-3"><a id="__codelineno-44-3" name="__codelineno-44-3" href="#__codelineno-44-3"></a><span class="o">}</span>
</span></code></pre></div>
<p>You can find the dependency at the following locations:</p>
<p><center></p>
<table>
<thead>
<tr>
<th>Dependency</th>
<th>Location</th>
</tr>
</thead>
<tbody>
<tr>
<td>DexGuard RASP support library</td>
<td>${DexGuardInstallPath}/lib/dexguard-rasp.jar</td>
</tr>
</tbody>
</table>
<p></center></p>
</div>
<div class="tabbed-block">
<div class="language-groovy highlight"><pre><span></span><code><span id="__span-45-1"><a id="__codelineno-45-1" name="__codelineno-45-1" href="#__codelineno-45-1"></a><span class="n">dependencies</span><span class="w"> </span><span class="o">{</span>
</span><span id="__span-45-2"><a id="__codelineno-45-2" name="__codelineno-45-2" href="#__codelineno-45-2"></a><span class="w">    </span><span class="n">compileOnly</span><span class="w"> </span><span class="s1">&#39;com.guardsquare:dexguard-rasp:9.10.5&#39;</span>
</span><span id="__span-45-3"><a id="__codelineno-45-3" name="__codelineno-45-3" href="#__codelineno-45-3"></a><span class="o">}</span>
</span></code></pre></div>
</div>
</div>
</div>
<p>You can add a method such as the following <code>myCallback</code> method:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="16:2"><input checked="checked" id="kotlin_6" name="__tabbed_16" type="radio" /><input id="java_6" name="__tabbed_16" type="radio" /><div class="tabbed-labels"><label for="kotlin_6">Kotlin</label><label for="java_6">Java</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="language-Kotlin highlight"><pre><span></span><code><span id="__span-46-1"><a id="__codelineno-46-1" name="__codelineno-46-1" href="#__codelineno-46-1"></a><span class="kd">class</span><span class="w"> </span><span class="nc">HelloWorldActivity</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">Activity</span><span class="p">()</span>
</span><span id="__span-46-2"><a id="__codelineno-46-2" name="__codelineno-46-2" href="#__codelineno-46-2"></a><span class="p">{</span>
</span><span id="__span-46-3"><a id="__codelineno-46-3" name="__codelineno-46-3" href="#__codelineno-46-3"></a><span class="w">    </span><span class="kd">companion</span><span class="w"> </span><span class="kd">object</span>
</span><span id="__span-46-4"><a id="__codelineno-46-4" name="__codelineno-46-4" href="#__codelineno-46-4"></a><span class="w">    </span><span class="err">{</span>
</span><span id="__span-46-5"><a id="__codelineno-46-5" name="__codelineno-46-5" href="#__codelineno-46-5"></a><span class="w">        </span><span class="cm">/**</span>
</span><span id="__span-46-6"><a id="__codelineno-46-6" name="__codelineno-46-6" href="#__codelineno-46-6"></a><span class="cm">         * This is an optional DexGuard RASP callback method.</span>
</span><span id="__span-46-7"><a id="__codelineno-46-7" name="__codelineno-46-7" href="#__codelineno-46-7"></a><span class="cm">         * The callback method should match one of the supported callback signatures.</span>
</span><span id="__span-46-8"><a id="__codelineno-46-8" name="__codelineno-46-8" href="#__codelineno-46-8"></a><span class="cm">         * Refer to</span>
</span><span id="__span-46-9"><a id="__codelineno-46-9" name="__codelineno-46-9" href="#__codelineno-46-9"></a><span class="cm">         * &lt;a href=&quot;https://platform.guardsquare.com/manual/dexguard/stable/latest/rasp.html#supported-rasp-callback-signatures&quot;&gt;this section&lt;/a&gt;</span>
</span><span id="__span-46-10"><a id="__codelineno-46-10" name="__codelineno-46-10" href="#__codelineno-46-10"></a><span class="cm">         * of the manual for a complete list of supported signatures.</span>
</span><span id="__span-46-11"><a id="__codelineno-46-11" name="__codelineno-46-11" href="#__codelineno-46-11"></a><span class="cm">         *</span>
</span><span id="__span-46-12"><a id="__codelineno-46-12" name="__codelineno-46-12" href="#__codelineno-46-12"></a><span class="cm">         * &lt;p&gt;Any strings used in the callback will be automatically encrypted.</span>
</span><span id="__span-46-13"><a id="__codelineno-46-13" name="__codelineno-46-13" href="#__codelineno-46-13"></a><span class="cm">         *</span>
</span><span id="__span-46-14"><a id="__codelineno-46-14" name="__codelineno-46-14" href="#__codelineno-46-14"></a><span class="cm">         * @param detectionReport A detection report containing threat information.</span>
</span><span id="__span-46-15"><a id="__codelineno-46-15" name="__codelineno-46-15" href="#__codelineno-46-15"></a><span class="cm">         */</span>
</span><span id="__span-46-16"><a id="__codelineno-46-16" name="__codelineno-46-16" href="#__codelineno-46-16"></a><span class="w">        </span><span class="nd">@JvmStatic</span>
</span><span id="__span-46-17"><a id="__codelineno-46-17" name="__codelineno-46-17" href="#__codelineno-46-17"></a><span class="w">        </span><span class="kd">fun</span><span class="w"> </span><span class="nf">myCallback</span><span class="p">(</span><span class="n">detectionReport</span><span class="p">:</span><span class="w"> </span><span class="n">DetectionReport</span><span class="p">)</span>
</span><span id="__span-46-18"><a id="__codelineno-46-18" name="__codelineno-46-18" href="#__codelineno-46-18"></a><span class="w">        </span><span class="p">{</span>
</span><span id="__span-46-19"><a id="__codelineno-46-19" name="__codelineno-46-19" href="#__codelineno-46-19"></a><span class="w">            </span><span class="c1">// The type of threat detected can be checked.</span>
</span><span id="__span-46-20"><a id="__codelineno-46-20" name="__codelineno-46-20" href="#__codelineno-46-20"></a><span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">detectionReport</span><span class="p">.</span><span class="na">isRunningInEmulator</span><span class="p">)</span>
</span><span id="__span-46-21"><a id="__codelineno-46-21" name="__codelineno-46-21" href="#__codelineno-46-21"></a><span class="w">            </span><span class="p">{</span>
</span><span id="__span-46-22"><a id="__codelineno-46-22" name="__codelineno-46-22" href="#__codelineno-46-22"></a><span class="w">                </span><span class="n">Log</span><span class="p">.</span><span class="na">i</span><span class="p">(</span><span class="s">&quot;HelloWorldActivity&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Emulator detected&quot;</span><span class="p">)</span>
</span><span id="__span-46-23"><a id="__codelineno-46-23" name="__codelineno-46-23" href="#__codelineno-46-23"></a><span class="w">            </span><span class="p">}</span>
</span><span id="__span-46-24"><a id="__codelineno-46-24" name="__codelineno-46-24" href="#__codelineno-46-24"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-46-25"><a id="__codelineno-46-25" name="__codelineno-46-25" href="#__codelineno-46-25"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-46-26"><a id="__codelineno-46-26" name="__codelineno-46-26" href="#__codelineno-46-26"></a><span class="p">}</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="language-Java highlight"><pre><span></span><code><span id="__span-47-1"><a id="__codelineno-47-1" name="__codelineno-47-1" href="#__codelineno-47-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">HelloWorldActivity</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">Activity</span>
</span><span id="__span-47-2"><a id="__codelineno-47-2" name="__codelineno-47-2" href="#__codelineno-47-2"></a><span class="p">{</span>
</span><span id="__span-47-3"><a id="__codelineno-47-3" name="__codelineno-47-3" href="#__codelineno-47-3"></a><span class="w">    </span><span class="cm">/**</span>
</span><span id="__span-47-4"><a id="__codelineno-47-4" name="__codelineno-47-4" href="#__codelineno-47-4"></a><span class="cm">     * This is an optional DexGuard RASP callback method.</span>
</span><span id="__span-47-5"><a id="__codelineno-47-5" name="__codelineno-47-5" href="#__codelineno-47-5"></a><span class="cm">     * The callback method should match one of the supported callback signatures.</span>
</span><span id="__span-47-6"><a id="__codelineno-47-6" name="__codelineno-47-6" href="#__codelineno-47-6"></a><span class="cm">     * Refer to</span>
</span><span id="__span-47-7"><a id="__codelineno-47-7" name="__codelineno-47-7" href="#__codelineno-47-7"></a><span class="cm">     * &lt;a href=&quot;https://platform.guardsquare.com/manual/dexguard/stable/latest/rasp.html#supported-rasp-callback-signatures&quot;&gt;this section&lt;/a&gt;</span>
</span><span id="__span-47-8"><a id="__codelineno-47-8" name="__codelineno-47-8" href="#__codelineno-47-8"></a><span class="cm">     * of the manual for a complete list of supported signatures.</span>
</span><span id="__span-47-9"><a id="__codelineno-47-9" name="__codelineno-47-9" href="#__codelineno-47-9"></a><span class="cm">     *</span>
</span><span id="__span-47-10"><a id="__codelineno-47-10" name="__codelineno-47-10" href="#__codelineno-47-10"></a><span class="cm">     * &lt;p&gt;Any strings used in the callback will be automatically encrypted.</span>
</span><span id="__span-47-11"><a id="__codelineno-47-11" name="__codelineno-47-11" href="#__codelineno-47-11"></a><span class="cm">     *</span>
</span><span id="__span-47-12"><a id="__codelineno-47-12" name="__codelineno-47-12" href="#__codelineno-47-12"></a><span class="cm">     * @param detectionReport A detection report containing threat information.</span>
</span><span id="__span-47-13"><a id="__codelineno-47-13" name="__codelineno-47-13" href="#__codelineno-47-13"></a><span class="cm">     */</span>
</span><span id="__span-47-14"><a id="__codelineno-47-14" name="__codelineno-47-14" href="#__codelineno-47-14"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">myCallback</span><span class="p">(</span><span class="n">DetectionReport</span><span class="w"> </span><span class="n">detectionReport</span><span class="p">)</span>
</span><span id="__span-47-15"><a id="__codelineno-47-15" name="__codelineno-47-15" href="#__codelineno-47-15"></a><span class="w">    </span><span class="p">{</span>
</span><span id="__span-47-16"><a id="__codelineno-47-16" name="__codelineno-47-16" href="#__codelineno-47-16"></a><span class="w">        </span><span class="c1">// The type of threat detected can be checked.</span>
</span><span id="__span-47-17"><a id="__codelineno-47-17" name="__codelineno-47-17" href="#__codelineno-47-17"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">detectionReport</span><span class="p">.</span><span class="na">isRunningInEmulator</span><span class="p">())</span>
</span><span id="__span-47-18"><a id="__codelineno-47-18" name="__codelineno-47-18" href="#__codelineno-47-18"></a><span class="w">        </span><span class="p">{</span>
</span><span id="__span-47-19"><a id="__codelineno-47-19" name="__codelineno-47-19" href="#__codelineno-47-19"></a><span class="w">            </span><span class="n">Log</span><span class="p">.</span><span class="na">i</span><span class="p">(</span><span class="s">&quot;MyApp&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Emulator detected&quot;</span><span class="p">);</span>
</span><span id="__span-47-20"><a id="__codelineno-47-20" name="__codelineno-47-20" href="#__codelineno-47-20"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-47-21"><a id="__codelineno-47-21" name="__codelineno-47-21" href="#__codelineno-47-21"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-47-22"><a id="__codelineno-47-22" name="__codelineno-47-22" href="#__codelineno-47-22"></a><span class="p">}</span>
</span></code></pre></div>
</div>
</div>
</div>
<p>along with the following DexGuard configuration to set <code>myCallback</code> as the RASP callback method:</p>
<div class="language-dexguard highlight"><pre><span></span><code><span id="__span-48-1"><a id="__codelineno-48-1" name="__codelineno-48-1" href="#__codelineno-48-1"></a><span class="err">-</span><span class="kt">raspcallback</span> <span class="kd">class </span><span class="nc">com.example.HelloWorldActivity </span><span class="p">{</span>
</span><span id="__span-48-2"><a id="__codelineno-48-2" name="__codelineno-48-2" href="#__codelineno-48-2"></a>    <span class="k">public</span> <span class="k">static</span> <span class="kt">void</span> <span class="nf">myCallback</span><span class="p">(</span><span class="kt">com.guardsquare.dexguard.rasp.callback.DetectionReport</span><span class="p">);</span>
</span><span id="__span-48-3"><a id="__codelineno-48-3" name="__codelineno-48-3" href="#__codelineno-48-3"></a><span class="p">}</span>
</span></code></pre></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Supported RASP callback methods' signatures are available in <a href="#rasp_callback-signatures">this link</a>.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The method must be static and have the same parameter as in the example.
You don't need a <code>-keep</code> rule for the method.</p>
</div>
<p>The <code>DetectionReport</code> contains several methods that allow you to determine the type of threat. You can find the complete list in the <a href="rasp/com/guardsquare/dexguard/rasp/callback/DetectionReport.html">DetectionReport JavaDoc</a>.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>The method <code>getDebugInfo()</code> contains encoded debugging information. If you are not using ThreatCast, we highly recommend that you log
this value as it will be helpful for providing to Guardsquare support when diagnosing any problems.</p>
</div>
</div>
</div>
</div>
<p>Note that you cannot reuse your malware protection callback for your RASP protections.</p>
<h4 id="rasp_callback-signatures">Supported RASP callback signatures<a class="headerlink" href="#rasp_callback-signatures" title="Permanent link">&para;</a></h4>
<p>DexGuard supports following RASP callbacks signatures:</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Please ensure your RASP callback method signature matches one of the following supported formats,
including the parameters types and access modifiers. </p>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>The method name and parameter names can be chosen arbitrarily, as long as the method 
signature matches the one specified in the <code>-raspcallback</code> rule.</p>
</div>
<div class="language-java highlight"><pre><span></span><code><span id="__span-49-1"><a id="__codelineno-49-1" name="__codelineno-49-1" href="#__codelineno-49-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">myCallBack</span><span class="p">(</span><span class="n">DetectionReport</span><span class="w"> </span><span class="n">detectionReport</span><span class="p">);</span>
</span><span id="__span-49-2"><a id="__codelineno-49-2" name="__codelineno-49-2" href="#__codelineno-49-2"></a><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">myCallBack</span><span class="p">(</span><span class="kt">long</span><span class="w"> </span><span class="n">debugInfo</span><span class="p">);</span>
</span><span id="__span-49-3"><a id="__codelineno-49-3" name="__codelineno-49-3" href="#__codelineno-49-3"></a><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">myCallBack</span><span class="p">(</span><span class="n">Context</span><span class="w"> </span><span class="n">context</span><span class="p">,</span><span class="w"> </span><span class="kt">long</span><span class="w"> </span><span class="n">debugInfo</span><span class="p">);</span>
</span></code></pre></div>
<hr />
<h2 id="verification">Verification<a class="headerlink" href="#verification" title="Permanent link">&para;</a></h2>
<p>RASP checks are injected in your application and will increase its size and incur a performance cost.
This section covers the options available to manage these impacts in case either is problematic.</p>
<p><strong>Impact table</strong></p>
<p><center></p>
<table>
<thead>
<tr>
<th>Aspect</th>
<th>Impact</th>
<th>Details</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Stability</strong></td>
<td>No</td>
<td>The additional runtime detection logic by itself will not cause stability issues to your application.</td>
</tr>
<tr>
<td><strong>Code Size</strong></td>
<td>Med</td>
<td>As additional detection logic will be added, there will be a limited but noticeable impact on your application's size. Also, you can use the <code>aggressiveness</code> level to limit the amount of checks being injected.</td>
</tr>
<tr>
<td><strong>Performance</strong></td>
<td>Low-High</td>
<td>Additional detection logic will impact your app's performance, depending on the location and the amount of checks being injected. Make sure to denylist your performance-sensitive code from such random injections.</td>
</tr>
</tbody>
</table>
<p></center></p>
<h3 id="size">Size<a class="headerlink" href="#size" title="Permanent link">&para;</a></h3>
<p>When spray injection is enabled, DexGuard injects checks randomly spread in the project's code.
In case your protected application is significantly larger due to these injections,
you can configure the number of injections through the appropriate aggressiveness setting.</p>
<details class="- question">
<summary>Where can I find the number of injections?</summary>
<p>You can find the total number of injections for each detector in the
<a href="indepth/protectionreport/protectionreport.html" target="_blank">protection report</a>.
This total number includes all types of RASP injection.</p>
<p>Alternatively, more detailed debug information can be generated with the
<a href="usage.html#printinjectmapping" target="_blank"><code>-printinjectmapping &lt;some_file&gt;</code></a> option.</p>
</details>
<p>The <a href="usage.html#raspaggressiveness"><code>-raspaggressiveness &lt;detector&gt; &lt;level&gt;</code></a> option allows you to configure the 
aggressiveness of the spray injection for each detector.
The possible aggressiveness levels are: <code>min</code>, <code>low</code>, <code>medium</code> and <code>high</code>.</p>
<p>For example, to increase the amount of injected hook detections you can put the following in your DexGuard configuration:</p>
<div class="language-dexguard highlight"><pre><span></span><code><span id="__span-50-1"><a id="__codelineno-50-1" name="__codelineno-50-1" href="#__codelineno-50-1"></a><span class="err">-</span><span class="kt">raspaggressiveness</span> <span class="kt">hook</span> <span class="kt">high</span>
</span></code></pre></div>
<p>The default aggressiveness levels are listed in the table below:</p>
<p><center></p>
<table>
<thead>
<tr>
<th>Detector name</th>
<th>Configuration name</th>
<th>Default aggressiveness</th>
</tr>
</thead>
<tbody>
<tr>
<td>Tamper Detector</td>
<td><code>apptamper</code></td>
<td><code>medium</code></td>
</tr>
<tr>
<td>Certificate Checker</td>
<td><code>certificatetamper</code></td>
<td><code>medium</code></td>
</tr>
<tr>
<td>Debug Detector</td>
<td><code>debug</code></td>
<td><code>medium</code></td>
</tr>
<tr>
<td>Emulator Detector</td>
<td><code>emulator</code></td>
<td><code>high</code></td>
</tr>
<tr>
<td>Hook Detector</td>
<td><code>hook</code></td>
<td><code>medium</code></td>
</tr>
<tr>
<td>Root Detector</td>
<td><code>root</code></td>
<td><code>medium</code></td>
</tr>
<tr>
<td>Virtual Environment Detector</td>
<td><code>virtualenvironment</code></td>
<td><code>medium</code></td>
</tr>
<tr>
<td>Memory Scanning Detector</td>
<td><code>memoryscanning</code></td>
<td><code>medium</code></td>
</tr>
<tr>
<td>Hardware Checker</td>
<td><code>hardware</code></td>
<td>N/A</td>
</tr>
</tbody>
</table>
<p></center></p>
<h3 id="performance">Performance<a class="headerlink" href="#performance" title="Permanent link">&para;</a></h3>
<p>DexGuard uses a pseudo-random seed value to determine the injection locations for spray checks.
This improves the resilience of your application but can introduce performance differences across builds when a check
is injected in performance sensitive code.
One intuitive example of performance sensitive code are methods responsible for updating the UI of a scroll view.</p>
<h4 id="profile-guided-obfuscation">Profile-Guided Obfuscation<a class="headerlink" href="#profile-guided-obfuscation" title="Permanent link">&para;</a></h4>
<p>The <a href="indepth/pgo.html">Profile-guided obfuscation (PGO)</a> feature provides a structural approach to identify
the hot code paths and fine-tune the RASP injection accordingly.
This feature is intended to be used as part of a two-phase configuration workflow which consists of:</p>
<ul>
<li>Phase 1: App instrumentation to collect profiling data and configurations.</li>
<li>Phase 2: Apply protection features tailored to the collected data.</li>
</ul>
<p>Follow the <a href="indepth/pgo.html#getting-started">getting started</a> guide of the Profile-guided obfuscation feature to learn
more on how to set up this feature and workflow.</p>
<h4 id="excluding-injection-locations">Excluding injection locations<a class="headerlink" href="#excluding-injection-locations" title="Permanent link">&para;</a></h4>
<div class="admonition warning">
<p class="admonition-title">The following section covers advanced configuration options. Try out the profile-guided obfuscation workflow before manually excluding injection locations!</p>
</div>
<p>It's possible that the profiling-guidance data did not exclude all performance-sensitive parts of your code,
and you still experience some performance degradation in a user flow of the app.</p>
<p>To find these remaining performance-sensitive injection locations, you can use the <code>-debugraspchecks</code> option.
This option builds an unreleasable version of your app which logs executed RASP checks and will not crash due to RASP.
You can use these logs to get more insight into your protected app and why its performance may be impacted.</p>
<div class="admonition danger">
<p class="admonition-title">Danger</p>
<p>The printed logs expose a lot of information about the executing RASP checks, which could also be used by a malicious attacker. The<code>-debugraspchecks</code> option prevents
these logs from being accidentally included in your released application or library by setting the 
<a href="https://developer.android.com/guide/topics/manifest/application-element#testOnly">testOnly</a> attribute in the Android manifest. This has implications on how to install an application under test:</p>
<ul>
<li>Apk
    <div class="language-text highlight"><pre><span></span><code><span id="__span-51-1"><a id="__codelineno-51-1" name="__codelineno-51-1" href="#__codelineno-51-1"></a>$ adb install -t out.apk
</span></code></pre></div></li>
<li>Bundle
    <div class="language-text highlight"><pre><span></span><code><span id="__span-52-1"><a id="__codelineno-52-1" name="__codelineno-52-1" href="#__codelineno-52-1"></a>$ bundletool install-apks --apks out.apks --allow-test-only
</span></code></pre></div>
If you are building a library: <strong>every</strong> application using the processed library will have testOnly set to true, preventing it from being releasable. The steps outlined for the application case
will have to be repeated by all consumers of your library. </li>
</ul>
</div>
<p>The example logs below show a hypothetical situation where the root check
is executed multiple times during the startup flow of the application.</p>
<div class="language-text highlight"><span class="filename">Logcat example</span><pre><span></span><code><span id="__span-53-1"><a id="__codelineno-53-1" name="__codelineno-53-1" href="#__codelineno-53-1"></a><span class="hll">Running Rooted check in com/example/StartupActivity.attachBaseContext
</span></span><span id="__span-53-2"><a id="__codelineno-53-2" name="__codelineno-53-2" href="#__codelineno-53-2"></a><span class="hll">Running Rooted check in com/example/StartupActivity.onCreate
</span></span></code></pre></div>
<p>If you notice that the performance of this startup is significantly slower than before,
you may opt to denylist one of these locations.</p>
<p>This can be achieved with the <a href="usage.html#raspdenylist"><code>-raspdenylist &lt;method_specification&gt;</code></a> option. </p>
<div class="admonition warning">
<p class="admonition-title">Do not denylist methods when there's no significant performance degradation!</p>
<p>Excluding too many locations lowers the protection of your application.
Use an evidence-based approach for configuring the <code>-raspdenylist</code> option.
Do not exclude methods when they have not proven to be performance sensitive.</p>
<p>RASP checks are designed with performance in mind, and repeated calls such as the ones in the example
are usually not an issue! </p>
</div>
<p>In the example, we could opt to exclude the <code>onCreate</code> method of the startup activity:</p>
<div class="language-dexguard highlight"><pre><span></span><code><span id="__span-54-1"><a id="__codelineno-54-1" name="__codelineno-54-1" href="#__codelineno-54-1"></a><span class="err">-</span><span class="kt">raspdenylist</span> <span class="kd">class </span><span class="nc">com.example.StartupActivity </span><span class="p">{</span>
</span><span id="__span-54-2"><a id="__codelineno-54-2" name="__codelineno-54-2" href="#__codelineno-54-2"></a>    <span class="kt">void</span> <span class="nf">onCreate</span><span class="p">(</span><span class="kt">android.os.Bundle</span><span class="p">);</span>
</span><span id="__span-54-3"><a id="__codelineno-54-3" name="__codelineno-54-3" href="#__codelineno-54-3"></a><span class="p">}</span>
</span></code></pre></div>
<p>With this configuration, the <code>attachBaseContext</code> method is still eligible for injection so
the implications for the security of the <code>StartupActivity</code> are minimal.</p>
<p>If performance of the <code>StartupActivity</code> remains problematic, 
you can opt to exclude all methods in the <code>StartupActivity</code> by using a wildcard.</p>
<div class="language-dexguard highlight"><pre><span></span><code><span id="__span-55-1"><a id="__codelineno-55-1" name="__codelineno-55-1" href="#__codelineno-55-1"></a><span class="err">-</span><span class="kt">raspdenylist</span> <span class="kd">class </span><span class="nc">com.example.StartupActivity </span><span class="p">{</span> <span class="nf">*</span><span class="p">;</span> <span class="p">}</span>
</span></code></pre></div>
<p>Alternatively, you can also use annotations to denylist specific classes or methods from RASP injection.</p>
<div class="language-dexguard highlight"><pre><span></span><code><span id="__span-56-1"><a id="__codelineno-56-1" name="__codelineno-56-1" href="#__codelineno-56-1"></a><span class="err">-</span><span class="kt">raspdenylist</span> <span class="o">@</span><span class="kt">MyAnnotation</span> <span class="kd">class </span><span class="nc">* </span><span class="p">{</span> <span class="o">@</span><span class="kt">NoRasp</span> <span class="nf">&lt;methods&gt;</span><span class="p">;</span> <span class="p">}</span>
</span></code></pre></div>
<details class="tip">
<summary>Remove ineffective denylists</summary>
<p>If you added a denylist but it did not improve the performance, take care to remove it again.
This way, security of the app is compromised as little as possible.</p>
</details>
<div class="admonition info">
<p class="admonition-title">Checkpoints</p>
<p><strong>Defined checkpoints have strict priority over the excluded classes.</strong></p>
<p>Checkpoint checks will be executed regardless of the list of excluded classes in <code>-raspdenylist</code>.</p>
</div>
<h4 id="turn-off-spray-injection">Turn off spray injection<a class="headerlink" href="#turn-off-spray-injection" title="Permanent link">&para;</a></h4>
<p>If performance of the protected application remains problematic, you can try turning off spray injection entirely.
Disabling spray injection can be achieved by explicitly specifying that you only want entrypoint injection:</p>
<div class="language-dexguard highlight"><pre><span></span><code><span id="__span-57-1"><a id="__codelineno-57-1" name="__codelineno-57-1" href="#__codelineno-57-1"></a><span class="c"># -raspchecks root,emulator</span>
</span><span id="__span-57-2"><a id="__codelineno-57-2" name="__codelineno-57-2" href="#__codelineno-57-2"></a><span class="hll"><span class="err">-</span><span class="kt">raspchecks</span> <span class="kt">root</span><span class="p">,</span><span class="kt">emulator</span> <span class="kt">entrypoint</span>
</span></span></code></pre></div>
<p>This will guarantee that injection locations are limited to entrypoints.
In this case, we highly recommend configuring additional checkpoints.</p>
<div class="admonition danger">
<p class="admonition-title">With spray disabled, checkpoints become even more important!</p>
<p>To prevent compromising your app security, you should make sure to define 
<a href="rasp.html#configuring-checkpoint-injection">checkpoints</a> for your most sensitive methods.</p>
</div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2024 Guardsquare
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://twitter.com/guardsquare" target="_blank" rel="noopener" title="twitter.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://www.linkedin.com/company/guardsquare-nv" target="_blank" rel="noopener" title="www.linkedin.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://www.facebook.com/guardsquare" target="_blank" rel="noopener" title="www.facebook.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M512 256C512 114.6 397.4 0 256 0S0 114.6 0 256c0 120 82.7 220.8 194.2 248.5V334.2h-52.8V256h52.8v-33.7c0-87.1 39.4-127.5 125-127.5 16.2 0 44.2 3.2 55.7 6.4V172c-6-.6-16.5-1-29.6-1-42 0-58.2 15.9-58.2 57.2V256h83.6l-14.4 78.2H287v175.9C413.8 494.8 512 386.9 512 256z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": ".", "features": ["content.code.copy", "search.suggest"], "search": "assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="assets/javascripts/bundle.caa56a14.min.js"></script>
      
    
  </body>
</html>